function createChart(){let e=window.H2buffer.Theme;"standard"===e&&(e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"standard-dark":"standard-light"),"standard-light"!==e&&window.DP_Themes[e]&&window.DP_Themes["standard-light"]?window.H2buffer.Theme_Setting=window.Highcharts.merge(window.DP_Themes["standard-light"],window.DP_Themes[e]):window.H2buffer.Theme_Setting=window.DP_Themes["standard-light"],chartSetFontSize(),window.Highcharts.setOptions(window.H2buffer.Theme_Setting),chartSetOptions(),chartSetElements()}function defaultAttrib(e,t,i){let n={id:i,aggr:"A0",atime:"T1",yaxis:"Y0",comp:"C0",line:"L0",mark:"M0",color:"F0",visible:0,dash:"D0",width:"W2",stack:0,factor:1,offset:0,unit:"",shortname:"",buffer_data:{timestamps:[],values:[],buffer_start:0,buffer_end:0}};if(-1===t?(n.color="F"+window.H2buffer.ColorNext%window.H2buffer.chart.options.colors.length,window.H2buffer.ColorNext++):n.color="F"+t%window.H2buffer.chart.options.colors.length,-1!==e){switch(n.unit=e.attributes.unit,e.id.identifier){case"ABS_HUMIDITY":n.yaxis="Y10";break;case"HUMIDITY":case"HUMIDITYF":case"ACTUAL_HUMIDITY":case"HUM_MAX_24H":case"HUM_MIN_24H":n.yaxis="Y6";break;case"TEMPERATURE":case"ACTUAL_TEMPERATURE":case"ABS_HUMIDITY":case"DEW_POINT":case"TEMP_MAX_24H":case"TEMP_MIN_24H":n.yaxis="Y1";break;case"SET_TEMPERATURE":case"SETPOINT":case"SET_POINT_TEMPERATURE":n.yaxis="Y1",n.line="L2";break;case"MEAN5MINUTES":n.yaxis="Y3";break;case"BRIGHTNESS":n.yaxis="Y8";break;case"LEVEL":n.yaxis="Y4",n.line="L2",n.unit="";break;case"STATE":n.yaxis="Y5",n.line="L2";break;case"PRESS_SHORT":case"PRESS_LONG":case"PRESS_OPEN":case"MOTION":n.yaxis="Y5",n.mark="M1",n.factor=5,n.line="L5";break;case"VALVE_STATE":n.yaxis="Y4",n.line="L2",n.unit="%"}if("BOOL"===e.attributes.type&&(n.yaxis="Y5",n.line="L2"),"%"===e.attributes.unit&&(n.yaxis="Y4",n.line="L2",n.unit="%"),"SysVar"===e.id.interfaceId&&"°C"===e.attributes.unit&&(n.yaxis="Y1",n.line="L0"),e.attributes.custom&&e.attributes.custom.HighChart){e=e.attributes.custom.HighChart.split("|");if(0<e.length)for(var o of e)if("A"===o.substr(0,1))n.aggr=o;else if("Y"===o.substr(0,1))n.yaxis=o;else if("T"===o.substr(0,1))n.atime=o;else if("F"===o.substr(0,1))n.color=o;else if("C"===o.substr(0,1))n.comp=o;else if("L"===o.substr(0,1))n.line=o;else if("M"===o.substr(0,1))n.mark=o;else if("D"===o.substr(0,1))n.dash=o;else if("W"===o.substr(0,1))n.width=o;else if("V"===o.substr(0,1))n.visible=parseInt(o.substr(1,1));else if("S"===o.substr(0,1))n.stack=parseInt(o.substr(1,2));else if("U"===o.substr(0,1))try{n.unit=decodeURIComponent(o.substr(1,20))}catch(e){n.unit=o.substr(1,20)}else if("N"===o.substr(0,1))try{n.shortname=decodeURIComponent(o.substr(1,40))}catch(e){n.shortname=o.substr(1,40)}else"X"===o.substr(0,1)?n.factor=parseFloat(o.substr(1,10)):"O"===o.substr(0,1)&&(n.offset=parseFloat(o.substr(1,10)))}}return n}function addSerie(e,t){var i,n,o,r,a,f,s,d,u,w;let l,c,b=void 0;var g=e.id.identifier;let h=1,m=""===t?e.idx.toString():t+"_"+e.idx.toString(),p=window.H2buffer.DataAttr.findIndex(e=>e.id===m);switch(-1===p&&(window.H2buffer.DataAttr.push(defaultAttrib(e,-1,m)),p=window.H2buffer.DataAttr.findIndex(e=>e.id===m)),n=parseInt(window.H2buffer.DataAttr[p].yaxis.substr(1,2)),r=window.H2buffer.chart.options.colors[parseInt(window.H2buffer.DataAttr[p].color.substr(1,2))],S=parseInt(window.H2buffer.DataAttr[p].aggr.substr(1,2)),f=parseInt(window.H2buffer.DataAttr[p].atime.substr(1,2)),a=parseInt(window.H2buffer.DataAttr[p].line.substr(1,2)),o=window.H2buffer.DataAttr[p].visible,v=window.H2buffer.DataAttr[p].unit,i=window.H2buffer.DataAttr[p].shortname,s=window.H2buffer.DataAttr[p].stack,d=window.H2buffer.DashType[parseInt(window.H2buffer.DataAttr[p].dash.substr(1,2))],u=parseInt(window.H2buffer.DataAttr[p].width.substr(1,2)),w=defineMarker(parseInt(window.H2buffer.DataAttr[p].mark.substr(1,2)),r,u),g){case"MEAN5MINUTES":h=3;break;case"STATE":case"VALVE_STATE":h=0}"BOOL"===e.attributes.type&&(h=0),"%"===e.attributes.unit&&(h=0),"SysVar"===e.id.interfaceId&&"°C"===e.attributes.unit&&(h=1),0===a?(l="spline",c=""):1===a?(l="line",c=""):2===a?(l="line",c="left"):3===a?(l="line",c="center"):4===a?(l="line",c="right"):5===a?(l="scatter",c=""):6===a?(l="areaspline",c=""):7===a?(l="area",c=""):8===a?(l="area",c="left"):9===a?(l="area",c="center"):10===a?(l="area",c="right"):11===a&&(l="column",c="");let H=[],y=!1;let x=2;0===f?(x=50,H=null):1===f?(y=!0,x=50,H=[["minute",[15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",[1]]]):2===f?H=[["hour",[1]],["day",[1]],["month",[1]],["year",[1]]]:3===f?(H=[["hour",[1]]],y=!0):4===f?(H=[["day",[1]]],y=!0):5===f?(H=[["week",[1]]],y=!0):6===f?(H=[["month",[1]]],y=!0):7===f?(H=[["month",[3]]],y=!0):8===f?(H=[["year",[1]]],y=!0):9===f?(H=[["hour",[3]]],y=!0):10===f?(H=[["hour",[6]]],y=!0):11===f?(H=[["hour",[8]]],y=!0):12===f&&(H=[["hour",[12]]],y=!0),1===S?b={enabled:!0,approximation:"average",forced:y,smoothed:!1,groupPixelWidth:x,units:H}:2===S||4===S||5===S||7===S?b={enabled:!0,approximation:"sum",forced:y,smoothed:!1,groupPixelWidth:x,units:H}:3===S?(b={enabled:!0,approximation:"average",forced:y,smoothed:!1,groupPixelWidth:x,units:H},l="line"===l?"spline":l):b={enabled:!1};var S;let A="";S=function(){return toolTipInfo(this)},A=""!==i?i:"C"===t.substr(0,1)?"SysVar"===e.id.interfaceId?e.attributes.displayName:e.attributes.displayName+"."+e.id.identifier+"("+window.ChhLanguage.default.historian["comptype"+t]+")":"SysVar"===e.id.interfaceId?e.attributes.displayName:e.attributes.displayName+"."+e.id.identifier;var v={id:m,name:A,type:l,step:c,yAxis:n,marker:w,visible:2===o,color:r,dashStyle:d,lineWidth:u,fillOpacity:.4,borderColor:r,borderWidth:2,stacking:0===s?null:"normal",stack:0===s?null:"group"+s,data:[],tooltip:{valueDecimals:h,pointFormat:null,pointFormatter:S,valueSuffix:" "+v},dataGrouping:b,dataLabels:defineDataLabels()};window.H2buffer.chart.addSeries(v,!1,!1)}function defineDataLabels(){let e;return 0===window.H2buffer.Labels?e={enabled:!1}:1===window.H2buffer.Labels?e={enabled:!0,allowOverlap:!0,color:null,style:{color:null},formatter:function(){let e;return 0<this.series.data.length?e=this.series.data[this.series.data.length-1]:0<this.series.points.length&&(e=this.series.points[this.series.points.length-1]),e&&e.category&&this.point.category===e.category?this.series.name:""}}:2===window.H2buffer.Labels&&(e={enabled:!0,allowOverlap:!1,color:null,style:{color:null},formatter:function(){return window.Highcharts.numberFormat(this.y,1)}}),e}function defineMarker(e,t,i){let n={enabled:!1,states:{hover:{enabled:!0}}},o;return o=i<3?4:4+i-2,0<e&&e<=window.H2buffer.chart.options.symbols.length?n={enabled:!0,symbol:window.H2buffer.chart.options.symbols[e-1],radius:o,lineColor:t,lineWidth:0,fillColor:t}:e>window.H2buffer.chart.options.symbols.length&&e<=2*window.H2buffer.chart.options.symbols.length?n={enabled:!0,symbol:window.H2buffer.chart.options.symbols[e-1-window.H2buffer.chart.options.symbols.length],radius:o,lineColor:"black",lineWidth:1,fillColor:t}:e>2*window.H2buffer.chart.options.symbols.length&&e<=3*window.H2buffer.chart.options.symbols.length?n={enabled:!0,symbol:window.H2buffer.chart.options.symbols[e-1-2*window.H2buffer.chart.options.symbols.length],radius:o,lineColor:"white",lineWidth:1,fillColor:t}:e>3*window.H2buffer.chart.options.symbols.length&&e<=4*window.H2buffer.chart.options.symbols.length?n={enabled:!0,symbol:window.H2buffer.chart.options.symbols[e-1-3*window.H2buffer.chart.options.symbols.length],radius:o,lineColor:t,lineWidth:2,fillColor:"black"}:e>4*window.H2buffer.chart.options.symbols.length&&e<=5*window.H2buffer.chart.options.symbols.length&&(n={enabled:!0,symbol:window.H2buffer.chart.options.symbols[e-1-4*window.H2buffer.chart.options.symbols.length],radius:o,lineColor:t,lineWidth:2,fillColor:"white"}),n}function setData(t){let i=window.H2buffer.ZR_Start.getTime(),n=window.H2buffer.ZR_Ende.getTime(),o;if("MinMax"!==t.options.name){o="C"===t.options.id.toString().substr(0,1)?t.options.id.toString().split("_")[1]:t.options.id.toString();let e=!1;var r=window.H2buffer.DataAttr.findIndex(e=>e.id===o);if(-1!==r){if("C0"!==window.H2buffer.DataAttr[r].comp){if("C"===t.options.id.toString().substr(0,1)&&2===window.H2buffer.DataAttr[r].visible)return;i+=getComparisionBackDay(window.H2buffer.DataAttr[r].comp),"C"===t.options.id.toString().substr(0,1)&&(n+=getComparisionBackDay(window.H2buffer.DataAttr[r].comp))}window.H2buffer.DataAttr[r].buffer_data&&window.H2buffer.DataAttr[r].buffer_data.buffer_start&&window.H2buffer.DataAttr[r].buffer_data.buffer_end&&(window.H2buffer.DataAttr[r].buffer_data.buffer_start<=i&&window.H2buffer.DataAttr[r].buffer_data.buffer_end>=n?(e=!0,setSerienData(r,t)):window.H2buffer.DataAttr[r].buffer_data.buffer_start>i&&window.H2buffer.DataAttr[r].buffer_data.buffer_start<=n&&window.H2buffer.DataAttr[r].buffer_data.buffer_end>=n&&0<window.H2buffer.DataAttr[r].buffer_data.values.length?n=window.H2buffer.DataAttr[r].buffer_data.buffer_start:window.H2buffer.DataAttr[r].buffer_data.buffer_start<=i&&window.H2buffer.DataAttr[r].buffer_data.buffer_end>=i&&window.H2buffer.DataAttr[r].buffer_data.buffer_end<n&&0<window.H2buffer.DataAttr[r].buffer_data.values.length&&(i=window.H2buffer.DataAttr[r].buffer_data.buffer_end)),e||getDataH2(t,window.H2buffer.DataAttr[r].id,r,i,n)}}}function bufferSerienData(t,i){if(t){var e=window.H2buffer.Queue.findIndex(e=>e[0]===t),n=window.H2buffer.Queue[e][3];if(0<i.values.length){for(let e=0;e<i.values.length;e++)i.values[e]=Math.round(1e3*i.values[e])/1e3;window.H2buffer.DataAttr[n].buffer_data.buffer_start>=window.H2buffer.Queue[e][4]&&window.H2buffer.DataAttr[n].buffer_data.buffer_start===window.H2buffer.Queue[e][5]&&0<window.H2buffer.DataAttr[n].buffer_data.values.length?(window.H2buffer.DataAttr[n].buffer_data.buffer_start=window.H2buffer.Queue[e][4],window.H2buffer.DataAttr[n].buffer_data.timestamps=i.timestamps.concat(window.H2buffer.DataAttr[n].buffer_data.timestamps),window.H2buffer.DataAttr[n].buffer_data.values=i.values.concat(window.H2buffer.DataAttr[n].buffer_data.values)):window.H2buffer.DataAttr[n].buffer_data.buffer_end<=window.H2buffer.Queue[e][5]&&window.H2buffer.DataAttr[n].buffer_data.buffer_end===window.H2buffer.Queue[e][4]&&0<window.H2buffer.DataAttr[n].buffer_data.values.length?(window.H2buffer.DataAttr[n].buffer_data.buffer_end=window.H2buffer.Queue[e][5],window.H2buffer.DataAttr[n].buffer_data.timestamps=window.H2buffer.DataAttr[n].buffer_data.timestamps.concat(i.timestamps),window.H2buffer.DataAttr[n].buffer_data.values=window.H2buffer.DataAttr[n].buffer_data.values.concat(i.values)):(window.H2buffer.DataAttr[n].buffer_data.buffer_start=window.H2buffer.Queue[e][4],window.H2buffer.DataAttr[n].buffer_data.buffer_end=window.H2buffer.Queue[e][5],window.H2buffer.DataAttr[n].buffer_data.timestamps=i.timestamps,window.H2buffer.DataAttr[n].buffer_data.values=i.values),window.H2buffer.Navigator<3?document.getElementById("count_val").innerHTML=(Number(document.getElementById("count_val").innerHTML)+i.values.length).toString():document.getElementById("count_val").innerHTML=""}var o=window.H2buffer.Queue[e][2];if(window.H2buffer.Queue.splice(e,1),loadingInfo(),setSerienData(n,o),317088e5<window.H2buffer.ZR_Ende-window.H2buffer.ZR_Start){let e=window.H2buffer.ZR_Ende.getTime(),t=!1;for(var r of window.H2buffer.chart.series)r.visible&&"nav"!==r.options.group&&r.xData[0]&&r.xData[0]<e&&(e=r.xData[0],t=!0);t&&(window.H2buffer.ZR_Start=new Date(e),window.H2buffer.Button_Jump=!0)}loadingInfo()}else console.log("ID missing")}function setSerienData(t,i){let e=parseInt(window.H2buffer.DataAttr[t].aggr.substr(1,2));var n,o=window.H2buffer.DataAttr[t].comp;let r=window.H2buffer.ZR_Start.getTime(),a=window.H2buffer.ZR_Ende.getTime(),f=[],s=0;void 0!==i.options&&"MinMax"!==i.options.name&&("C"===i.options.id.toString().substr(0,1)&&(s=getComparisionBackDay(o),r+=s,a+=s,(n=window.H2buffer.DataAttr.findIndex(e=>e.id===i.options.id.toString()))&&(e=parseInt(window.H2buffer.DataAttr[n].aggr.substr(1,2)))),f=(0===e?setSerienDataAggr0:2===e?setSerienDataAggr2:5===e?setSerienDataAggr5:6===e?setSerienDataAggr6:7===e?setSerienDataAggr7:setSerienDataAggr1)(t,r,a,s),i.setData(f,!0,!1,!1),3===e&&addAggregationMinMax(i),loadNewAxisInfo(),showAggrText(),"C0"!==window.H2buffer.DataAttr[t].comp&&"C"!==i.options.id.toString().substr(0,1)&&(o=window.H2buffer.chart.get(window.H2buffer.DataAttr[t].comp+"_"+window.H2buffer.DataAttr[t].id),n=window.H2buffer.DataAttr.findIndex(e=>e.id===window.H2buffer.DataAttr[t].comp+"_"+window.H2buffer.DataAttr[t].id),o&&-1!==n&&"C0"===window.H2buffer.DataAttr[n].comp&&2===window.H2buffer.DataAttr[n].visible&&setSerienData(t,o)))}function setSerienDataAggr0(t,e,i,n){let o=[];var r=window.H2buffer.DataAttr[t].buffer_data,a=sortedIndex(r.timestamps,e),f=sortedIndex(r.timestamps,i);if(e<=r.timestamps[f]){0<a&&e!==r.timestamps[a]&&o.push([e-n,r.values[a-1]*window.H2buffer.DataAttr[t].factor+window.H2buffer.DataAttr[t].offset]);for(let e=a;e<=f;e++)o.push([r.timestamps[e]-n,r.values[e]*window.H2buffer.DataAttr[t].factor+window.H2buffer.DataAttr[t].offset])}return o}function setSerienDataAggr1(e,o,t,r){let a=[];var f=window.H2buffer.DataAttr[e].buffer_data,o=sortedIndex(f.timestamps,o),s=sortedIndex(f.timestamps,t);if(o<f.timestamps.length){let i=f.values[o],n=f.timestamps[o];for(let t=o;t<=s;t++){if(6e5<f.timestamps[t]-n){n=6e4*Math.round((n+6e5)/6e4);for(let e=n;e<f.timestamps[t]-3e5;e+=6e5)a.push([e-r,i])}i=f.values[t]*window.H2buffer.DataAttr[e].factor+window.H2buffer.DataAttr[e].offset,n=f.timestamps[t],a.push([f.timestamps[t]-r,i])}}return a}function setSerienDataAggr2(n,o,r,a){let f=[];var s=window.H2buffer.DataAttr[n].buffer_data,d=sortedIndex(s.timestamps,o),u=sortedIndex(s.timestamps,r);if(d<s.timestamps.length){let e=s.values[d],i=s.timestamps[d];for(let t=d+1;t<=u;t++)if(s.timestamps[t]>=o&&s.timestamps[t]<=r){if(6e5<s.timestamps[t]-i){i=6e4*Math.round((i+6e5)/6e4);for(let e=i;e<s.timestamps[t];e+=6e5)f.push([e,0])}f.push([s.timestamps[t]-a,(s.values[t]-e)*window.H2buffer.DataAttr[n].factor+window.H2buffer.DataAttr[n].offset]),e=s.values[t],i=s.timestamps[t]}}return f}function setSerienDataAggr5(n,o,e,r){let a=[],f=0;var s=window.H2buffer.DataAttr[n].buffer_data,o=sortedIndex(s.timestamps,o),d=sortedIndex(s.timestamps,e);if(o<s.timestamps.length){let t=0<s.values[o]?1:0,i=s.timestamps[o];for(let e=o+1;e<=d;e++)if(0<t&&0===s.values[e]){if(t=s.timestamps[e]-i,f=i,6e4<t)for(f=i;f<s.timestamps[e]-6e4;f+=6e4)a.push([f-r,+window.H2buffer.DataAttr[n].factor+window.H2buffer.DataAttr[n].offset]),t-=6e4;0<t&&a.push([f-1-r,Math.round(t/60)/1e3*window.H2buffer.DataAttr[n].factor+window.H2buffer.DataAttr[n].offset]),t=0,i=s.timestamps[e]}else if(0===t&&0<s.values[e]){if(t=s.timestamps[e]-i,6e4<t)for(f=i;f<s.timestamps[e]-6e4;f+=6e4)a.push([f-r,0]),t-=6e4;t=1,i=s.timestamps[e]}if(0<t){if(t=e-i,6e4<t)for(f=i;f<e-6e4;f+=6e4)a.push([f-r,+window.H2buffer.DataAttr[n].factor+window.H2buffer.DataAttr[n].offset]),t-=6e4;0<t&&a.push([e-r,Math.round(t/60)/1e3*window.H2buffer.DataAttr[n].factor+window.H2buffer.DataAttr[n].offset])}}return a}function setSerienDataAggr6(t,e,i,n){let o=[];var r=window.H2buffer.DataAttr[t].buffer_data,a=sortedIndex(r.timestamps,e),f=sortedIndex(r.timestamps,i);if(e<=r.timestamps[f])for(let e=a;e<=f;e++){var s=6e4*Math.round((r.timestamps[e]-n)/6e4);o.push([s,r.values[e]*window.H2buffer.DataAttr[t].factor+window.H2buffer.DataAttr[t].offset])}return o}function setSerienDataAggr7(n,o,r,a){let f=[];var s=window.H2buffer.DataAttr[n].buffer_data,d=sortedIndex(s.timestamps,o),u=sortedIndex(s.timestamps,r);if(d<s.timestamps.length){let e=s.values[d],i=s.timestamps[d];for(let t=d+1;t<=u;t++)if(s.timestamps[t]>=o&&s.timestamps[t]<=r){if(6e5<s.timestamps[t]-i){i=6e4*Math.round((i+6e5)/6e4);for(let e=i;e<s.timestamps[t];e+=6e5)f.push([e,0])}var w=(s.values[t]-e)*window.H2buffer.DataAttr[n].factor+window.H2buffer.DataAttr[n].offset;0<=w&&f.push([s.timestamps[t]-a,w]),e=s.values[t],i=s.timestamps[t]}}return f}function sortedIndex(e,t){let i=0,n=e.length-1,o;if(e[i]>=t)return 0;if(e[n]<=t)return n;for(;i<n;)e[o=Math.floor((i+n)/2)]<t?i=o+1:n=o;return i>e.length-1&&(i=e.length-1),i}function getDataH2(t,i,n,o,r){if("MinMax"!==t.options.name){var a=i+"_"+Date.now();let e=t.options.id.toString();"C"===t.options.id.toString().substr(0,1)&&(e=e.split("_")[1]),window.H2buffer.Queue.push([a,i,t,n,o,r]),loadingInfo();n="http://"+window.H2buffer.server+":"+window.H2buffer.port;n+="/query/jsonrpc.gy",n+=""===window.H2buffer.ApiKey?"":"?"+window.H2buffer.ApiKey;r={id:a,method:"getTimeSeriesRaw",params:[e,o,r]},r=JSON.stringify(r);$.ajax({url:n,dataType:"json",contentType:"application/json",type:"post",data:r,cache:!1,async:!0,error:function(e,t,i){ajaxErrorOutput(e,t,i)},success:function(e){e.result?e.result&&bufferSerienData(e.id,e.result):console.log(e)}})}}function requestInitData(){window.H2buffer.Navigator<3?(document.getElementById("count_val").innerHTML="0",document.getElementById("count_text").innerHTML=window.ChhLanguage.default.historian.labelValues):(document.getElementById("count_val").innerHTML="",document.getElementById("count_text").innerHTML=""),window.H2buffer.chart=$("#container").highcharts();var e=getLocalData("DataPoints");if(e){try{window.H2buffer.DataPoints=JSON.parse(e)}catch{window.H2buffer.DataPoints={}}window.H2buffer.DataPoints[1]&&window.H2buffer.DataPoints[1].attributes?(parseDataPoints(),(null===(e=getLocalData("DataPointsTime"))||parseInt(e)+36e5<=Date.now())&&setTimeout(requestData,2e3)):requestData()}else requestData();window.H2buffer.chart.stockTools&&window.H2buffer.chart.stockTools.showhideBtn.click()}function requestData(){var e="http://"+window.H2buffer.server+":"+window.H2buffer.port;e+="/query/jsonrpc.gy",e+=""===window.H2buffer.ApiKey?"":"?"+window.H2buffer.ApiKey;var t={id:"DP",method:"getDataPoint",params:[]},t=JSON.stringify(t);$.ajax({url:e,dataType:"json",contentType:"application/json",type:"post",data:t,cache:!1,async:!0,error:function(e,t,i){ajaxErrorOutput(e,t,i)},success:function(e){requestData2(e)}})}function requestSettings(){var e="http://"+window.H2buffer.server+":"+window.H2buffer.port;e+="/query/jsonrpc.gy",e+=""===window.H2buffer.ApiKey?"":"?"+window.H2buffer.ApiKey;var t={id:"Setup",method:"getConfig",params:["HighChart"]},t=JSON.stringify(t);$.ajax({url:e,dataType:"json",contentType:"application/json",type:"post",data:t,cache:!1,async:!0,error:function(e,t,i){ajaxErrorOutput(e,t,i)},success:function(e){let t;if(e.result)try{t=e.result.replace(/'/g,'"'),t&&'{"'===t.substring(0,2)?(window.H2buffer.Settings=JSON.parse(t),window.H2buffer.Settings_old=JSON.parse(t)):(window.H2buffer.Settings={Setting:""},t=JSON.stringify(window.H2buffer.Settings))}catch(e){window.H2buffer.Settings={Setting:""},t=JSON.stringify(window.H2buffer.Settings)}else window.H2buffer.Settings={Setting:""},t=JSON.stringify(window.H2buffer.Settings);t!==getLocalData("setting")&&(setLocalData("setting",t),parseSetting(),readLinkData()),setLocalData("settingTime",Date.now())}})}function parseSetting(){let e,t,i;if(window.H2buffer.Settings){for(e=0;e<window.H2buffer.yAxis.length;e++)if(window.H2buffer.Settings["YAXIS"+e]){t=window.H2buffer.Settings["YAXIS"+e].split("|");var n=e;for(i=0;i<t.length;i++)if("P"===t[i].substr(0,1))"0"===t[i].substr(1,1)&&(window.H2buffer.yAxis[n].position=!1),"1"===t[i].substr(1,1)&&(window.H2buffer.yAxis[n].position=!0);else if("C"===t[i].substr(0,1))"0"===t[i].substr(1,1)&&(window.H2buffer.yAxis[n].type=0),"1"===t[i].substr(1,1)&&(window.H2buffer.yAxis[n].type=1);else if("A"===t[i].substr(0,1))"0"<=t[i].substr(1,1)&&t[i].substr(1,1)<="2"&&(window.H2buffer.yAxis[n].limit=parseInt(t[i].substr(1,1)));else if("L"===t[i].substr(0,1))window.H2buffer.yAxis[n].min=parseFloat(t[i].substr(1,15));else if("H"===t[i].substr(0,1))window.H2buffer.yAxis[n].max=parseFloat(t[i].substr(1,15));else if("G"===t[i].substr(0,1))window.H2buffer.yAxis[n].tick=parseInt(t[i].substr(1,15));else if("F"===t[i].substr(0,1))window.H2buffer.yAxis[n].color=parseInt(t[i].substr(1,2));else if("T"===t[i].substr(0,1))try{window.H2buffer.yAxis[n].text=decodeURIComponent(t[i].substr(1,50))}catch{window.H2buffer.yAxis[n].text=t[i].substr(1,50)}}if(window.H2buffer.Settings.Setting)for(t=window.H2buffer.Settings.Setting.split("|"),i=0;i<t.length;i++)if("L"===t[i].substr(0,1))window.H2buffer.Legend=parseInt(t[i].substr(1,2));else if("N"===t[i].substr(0,1))window.H2buffer.Navigator=parseInt(t[i].substr(1,2));else if("P"===t[i].substr(0,1))window.H2buffer.Labels=parseInt(t[i].substr(1,2));else if("D"===t[i].substr(0,1))window.H2buffer.DayLight=parseInt(t[i].substr(1,2));else if("G"===t[i].substr(0,1))window.H2buffer.Grid=parseInt(t[i].substr(1,2));else if("F"===t[i].substr(0,1))window.H2buffer.ShowFilter=parseInt(t[i].substr(1,2));else if("I"===t[i].substr(0,1))window.H2buffer.DataPointFilter=parseInt(t[i].substr(1,2));else if("B"===t[i].substr(0,1))window.H2buffer.Theme=t[i].substr(1,30),"standard_groß"===window.H2buffer.Theme?(window.H2buffer.Theme="standard-light",window.H2buffer.FontSize=20):"standard_groesser"===window.H2buffer.Theme&&(window.H2buffer.Theme="standard-light",window.H2buffer.FontSize=30);else if("O"===t[i].substr(0,1))window.H2buffer.FontSize=parseInt(t[i].substr(1,3));else if("C"===t[i].substr(0,1))window.H2buffer.CrossHair=parseInt(t[i].substr(1,3));else if("M"===t[i].substr(0,1))window.H2buffer.ToolTip=parseInt(t[i].substr(1,3));else if("H"===t[i].substr(0,1))window.H2buffer.HighLight=parseInt(t[i].substr(1,3));else if("R"===t[i].substr(0,1))window.H2buffer.refreshSec=parseInt(t[i].substr(1,10));else if("T"===t[i].substr(0,1))try{window.H2buffer.Title=decodeURIComponent(t[i].substr(1,50))}catch{window.H2buffer.Title=t[i].substr(1,50)}else if("S"===t[i].substr(0,1))try{window.H2buffer.Subtitle=decodeURIComponent(t[i].substr(1,60))}catch{window.H2buffer.Subtitle=t[i].substr(1,60)}}}function readLinkData(){var t;if(location.search)for(t of decodeURIComponent(location.search.substring(1)).split("&")){let e=t.split("=");e[0]&&("dp"===e[0].toLowerCase()?window.H2buffer.Limit=!0:"periode"===e[0].toLowerCase()||"period"===e[0].toLowerCase()?(window.H2buffer.ZR_Start=new Date(window.H2buffer.ZR_Ende-new Date(36e5*parseInt(e[1]))),window.H2buffer.Zoom=parseInt(e[1])):"setting"===e[0].toLowerCase()?readLinkDataSetting(e[1]):"filterkey"===e[0].toLowerCase()?window.H2buffer.filter_feld=decodeURIComponent(e[1].toLowerCase()):"title"===e[0].toLowerCase()?(window.H2buffer.Title=decodeURIComponent(e[1]),window.H2buffer.Title=window.H2buffer.Title.replaceAll("§","%").replaceAll("µ","&")):"subtitle"===e[0].toLowerCase()?(window.H2buffer.Subtitle=decodeURIComponent(e[1]),window.H2buffer.Subtitle=window.H2buffer.Subtitle.replaceAll("§","%").replaceAll("µ","&")):"legend"===e[0].toLowerCase()?("false"===decodeURIComponent(e[1].toLowerCase())&&(window.H2buffer.Legend=0),0<=parseInt(decodeURIComponent(e[1]))&&parseInt(decodeURIComponent(e[1]))<7&&(window.H2buffer.Legend=parseInt(decodeURIComponent(e[1])))):"navigator"===e[0].toLowerCase()?("false"===decodeURIComponent(e[1].toLowerCase())&&(window.H2buffer.Navigator=3),"0"<=decodeURIComponent(e[1].toLowerCase())&&decodeURIComponent(e[1].toLowerCase())<="4"&&(window.H2buffer.Navigator=parseInt(decodeURIComponent(e[1])))):"theme"===e[0].toLowerCase()?(window.H2buffer.Theme=decodeURIComponent(e[1].toLowerCase()),"standard_groß"===window.H2buffer.Theme?(window.H2buffer.Theme="standard-light",window.H2buffer.FontSize=20):"standard_groesser"===window.H2buffer.Theme&&(window.H2buffer.Theme="standard-light",window.H2buffer.FontSize=30)):"fontsize"===e[0].toLowerCase()?window.H2buffer.FontSize=parseInt(decodeURIComponent(e[1])):"dpfilter"===e[0].toLowerCase()?window.H2buffer.DataPointFilter=parseInt(decodeURIComponent(e[1])):"labels"===e[0].toLowerCase()?("true"===decodeURIComponent(e[1].toLowerCase())&&(window.H2buffer.Labels=1),"0"<=decodeURIComponent(e[1].toLowerCase())&&decodeURIComponent(e[1].toLowerCase())<="2"&&(window.H2buffer.Labels=parseInt(decodeURIComponent(e[1])))):"daylight"===e[0].toLowerCase()?("false"===decodeURIComponent(e[1].toLowerCase())&&(window.H2buffer.DayLight=0),"0"<=decodeURIComponent(e[1].toLowerCase())&&decodeURIComponent(e[1].toLowerCase())<="3"&&(window.H2buffer.DayLight=parseInt(decodeURIComponent(e[1])))):"grid"===e[0].toLowerCase()?window.H2buffer.Grid=parseInt(decodeURIComponent(e[1])):"refresh"===e[0].toLowerCase()&&(0<parseInt(decodeURIComponent(e[1]))?window.H2buffer.refreshSec=parseInt(decodeURIComponent(e[1])):"true"===decodeURIComponent(e[1].toLowerCase())&&(window.H2buffer.refreshSec=60)))}0<window.H2buffer.refreshSec&&(window.H2buffer.AutoRefresh=window.H2buffer.refreshSec,window.H2buffer.AutoRefreshCount=window.H2buffer.AutoRefresh,setTimeout(autoRefresh,1e3)),createChart()}function readLinkDataSetting(e){var t;if(e)for(t of e.split("|"))switch(t.substr(0,1)){case"L":window.H2buffer.Legend=parseInt(t.substr(1,2));break;case"N":window.H2buffer.Navigator=parseInt(t.substr(1,2));break;case"P":window.H2buffer.Labels=parseInt(t.substr(1,2));break;case"D":window.H2buffer.DayLight=parseInt(t.substr(1,2));break;case"G":window.H2buffer.Grid=parseInt(t.substr(1,2));break;case"F":window.H2buffer.ShowFilter=parseInt(t.substr(1,2));break;case"I":window.H2buffer.DataPointFilter=parseInt(t.substr(1,2));break;case"B":window.H2buffer.Theme=t.substr(1,30),"standard_groß"===window.H2buffer.Theme?(window.H2buffer.Theme="standard-light",window.H2buffer.FontSize=20):"standard_groesser"===window.H2buffer.Theme&&(window.H2buffer.Theme="standard-light",window.H2buffer.FontSize=30);break;case"O":window.H2buffer.FontSize=parseInt(t.substr(1,3));break;case"C":window.H2buffer.CrossHair=parseInt(t.substr(1,3));break;case"M":window.H2buffer.ToolTip=parseInt(t.substr(1,3));break;case"H":window.H2buffer.HighLight=parseInt(t.substr(1,3));break;case"R":window.H2buffer.refreshSec=parseInt(t.substr(1,10));break;case"T":try{window.H2buffer.Title=decodeURIComponent(t.substr(1,50))}catch{window.H2buffer.Title=t.substr(1,50)}break;case"S":try{window.H2buffer.Subtitle=decodeURIComponent(t.substr(1,60))}catch{window.H2buffer.Subtitle=t.substr(1,60)}}}function requestData2(t){if(t.result){let e=[];for(var i of t.result)e.push(i);e.sort(function(e,t){let i=e.attributes.displayName+"."+e.id.identifier,n=t.attributes.displayName+"."+t.id.identifier;return i=i.toLowerCase(),n=n.toLowerCase(),i<n?-1:i>n?1:0}),JSON.stringify(e)!==getLocalData("DataPoints")&&(setLocalData("DataPoints",JSON.stringify(e)),window.H2buffer.DataPoints=e,parseDataPoints()),setLocalData("DataPointsTime",Date.now())}}function parseDataPoints(){let t,e="";window.H2buffer.DataAttr=[],parseDataPointFill();let i,n,o;if(location.search)for(n=decodeURIComponent(location.search.substring(1)).split("&"),t=0;t<n.length;t++)if(i=n[t].split("="),i[0])if("dp"===i[0].toLowerCase())e=decodeURIComponent(i[1]).toLowerCase().split(","),parseDataPointsDP(e,i);else if("yaxis"===i[0].toLowerCase())e=decodeURIComponent(i[1]).toLowerCase().split(","),parseDataPointsAxis(e,i);else if("room"===i[0].toLowerCase()){let e=decodeURIComponent(i[1].toLowerCase());o=document.getElementById("Select-Raum");for(var r of o.options)if(r.label.toLowerCase()===e.toLowerCase()||r.value.toLowerCase()===e.toLowerCase()){o.value=r.value;break}}else if("function"===i[0].toLowerCase()){let e=decodeURIComponent(i[1].toLowerCase());o=document.getElementById("Select-Gewerk");for(var a of o.options)if(a.label.toLowerCase()===e.toLowerCase()||a.value.toLowerCase()===e.toLowerCase()){o.value=a.value;break}}else"filterline"===i[0].toLowerCase()&&("false"!==decodeURIComponent(i[1].toLowerCase())&&"0"!==decodeURIComponent(i[1].toLowerCase())||(window.H2buffer.ShowFilter=0),"1"===decodeURIComponent(i[1].toLowerCase())&&(window.H2buffer.ShowFilter=1),"2"===decodeURIComponent(i[1].toLowerCase())&&(window.H2buffer.ShowFilter=2),"3"===decodeURIComponent(i[1].toLowerCase())&&(window.H2buffer.ShowFilter=3));for(window.H2buffer.chart.update({yAxis:defineYAxis(),legend:defineLegend()},!1,!1),$("#Select-Yaxis").empty(),o=document.getElementById("Select-Yaxis"),t=0;t<window.H2buffer.yAxis.length;t++){let e=document.createElement("option");""!==window.H2buffer.yAxis[t].text&&null!==window.H2buffer.yAxis[t].text?e.text=window.H2buffer.yAxis[t].text:e.text=window.ChhLanguage.default.historian["yaxis"+t],e.value="Y"+t,o.add(e)}showFilterLine(),changeEventRaumFilter(),parseDataPointsZoom()}function parseDataPointFill(){let e=[],t=[],i,n;var o,r,a,f;window.H2buffer.DataAttr=[],window.H2buffer.ColorNext=0;for(r of window.H2buffer.DataPoints)if(checkFilter("ALLES","ALLES","",null,r)){if(null!==r.attributes.room){i=r.attributes.room.split(",");for(var s of i)""!==s&&-1===e.indexOf(s.trim())&&e.push(s.trim())}if(null!==r.attributes.function){i=r.attributes.function.split(",");for(var d of i)""!==d&&-1===t.indexOf(d.trim())&&t.push(d.trim())}r.attributes.custom&&r.attributes.custom.HighChart&&(n=r.attributes.custom.HighChart.split("|"),0<n.length&&(o=defaultAttrib(r,-1,r.idx.toString()),window.H2buffer.DataAttr.push(o)))}e.sort(sortLowercase),$("#Select-Raum").empty();let u=document.getElementById("Select-Raum");u.options[u.options.length]=new Option(window.ChhLanguage.default.historian.roomALL,"ALLES"),u.options[u.options.length]=new Option(window.ChhLanguage.default.historian.sysvarALL,"SYSVAR");for(a of e)n=a,window.ChhLanguage.default.historian[a]&&(n=window.ChhLanguage.default.historian[a]),u.options[u.options.length]=new Option(n,a);t.sort(sortLowercase),$("#Select-Gewerk").empty(),u=document.getElementById("Select-Gewerk"),u.options[u.options.length]=new Option(window.ChhLanguage.default.historian.functionALL,"ALLES");for(f of t)n=f,window.ChhLanguage.default.historian[f]&&(n=window.ChhLanguage.default.historian[f]),u.options[u.options.length]=new Option(n,f);document.getElementById("filterFeld").value=window.H2buffer.filter_feld}function parseDataPointsZoom(){var e;if(location.search)for(e of decodeURIComponent(location.search.substring(1)).split("&")){let t=e.split("=");if(t[0]&&"zoom"===t[0].toLowerCase()){window.H2buffer.Zoom=parseFloat(t[1]);let e=new Date(window.H2buffer.ZR_Ende-new Date(36e5*window.H2buffer.Zoom));window.H2buffer.chart.xAxis[0].setExtremes(e.getTime(),window.H2buffer.ZR_Ende.getTime(),!0)}}}function parseDataPointsDP(e,r){for(let o=0;o<e.length;o++){let i=e[o].toUpperCase().split("|"),n=i[0];if(0<i.length){var a=window.H2buffer.DataPoints.findIndex(e=>e.idx.toString().toUpperCase()===n.toString().toUpperCase()||e.attributes.displayName&&e.attributes.displayName.toUpperCase()===n.toUpperCase()||(e.id.address+"."+e.id.identifier).toUpperCase()===n.toUpperCase());-1!==a&&(n=window.H2buffer.DataPoints[a].idx.toString());let t=window.H2buffer.DataAttr.findIndex(e=>e.id===n);if(-1===t){let e;e=defaultAttrib(-1!==a?window.H2buffer.DataPoints[a]:-1,o,n),window.H2buffer.DataAttr.push(e),t=window.H2buffer.DataAttr.findIndex(e=>e.id===n)}window.H2buffer.DataAttr[t].visible=2;for(let e=1;e<i.length;e++)"A"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].aggr=i[e]:"Y"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].yaxis=i[e]:"T"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].atime=i[e]:"F"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].color=i[e]:"C"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].comp=i[e]:"L"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].line=i[e]:"M"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].mark=i[e]:"D"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].dash=i[e]:"W"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].width=i[e]:"S"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].stack=parseInt(i[e].substr(1,2)):"V"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].visible=parseInt(i[e].substr(1,1)):"U"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].unit=decodeURIComponent(r[1]).split(",")[o].split("|")[e].substr(1,20).replaceAll("§","%").replaceAll("µ","&"):"N"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].shortname=decodeURIComponent(r[1]).split(",")[o].split("|")[e].substr(1,40).replaceAll("§","%").replaceAll("µ","&"):"X"===i[e].substr(0,1)?window.H2buffer.DataAttr[t].factor=parseFloat(i[e].substr(1,10)):"O"===i[e].substr(0,1)&&(window.H2buffer.DataAttr[t].offset=parseFloat(i[e].substr(1,10)))}}}function parseDataPointsAxis(e,n){for(let i=0;i<e.length;i++){let t=e[i].toUpperCase().split("|");var o=parseInt(t[0].substr(1,2));if(0<=o&&o<window.H2buffer.yAxis.length&&0<t.length)for(let e=1;e<t.length;e++)"P"===t[e].substr(0,1)?("0"===t[e].substr(1,1)&&(window.H2buffer.yAxis[o].position=!1),"1"===t[e].substr(1,1)&&(window.H2buffer.yAxis[o].position=!0)):"C"===t[e].substr(0,1)?("0"===t[e].substr(1,1)&&(window.H2buffer.yAxis[o].type=0),"1"===t[e].substr(1,1)&&(window.H2buffer.yAxis[o].type=1)):"A"===t[e].substr(0,1)?("0"===t[e].substr(1,1)&&(window.H2buffer.yAxis[o].limit=0),"1"===t[e].substr(1,1)&&(window.H2buffer.yAxis[o].limit=1),"2"===t[e].substr(1,1)&&(window.H2buffer.yAxis[o].limit=2)):"L"===t[e].substr(0,1)?window.H2buffer.yAxis[o].min=parseFloat(t[e].substr(1,15)):"H"===t[e].substr(0,1)?window.H2buffer.yAxis[o].max=parseFloat(t[e].substr(1,15)):"G"===t[e].substr(0,1)?window.H2buffer.yAxis[o].tick=parseInt(t[e].substr(1,15)):"F"===t[e].substr(0,1)?window.H2buffer.yAxis[o].color=parseInt(t[e].substr(1,2)):"T"===t[e].substr(0,1)&&(window.H2buffer.yAxis[o].text=decodeURIComponent(n[1]).split(",")[i].split("|")[e].substr(1,50).replaceAll("§","%").replaceAll("µ","&"))}}function setStockToolLang(){for(var t in window.Highcharts.seriesTypes){let e=window.Highcharts.seriesTypes[t];e.defaultOptions&&e.defaultOptions.params&&e.prototype&&e.prototype.type&&window.Highcharts.defaultOptions.lang.navigation.popup.indicatorAliases&&window.Highcharts.defaultOptions.lang.navigation.popup.indicatorAliases[e.prototype.type]&&(e.prototype.nameBase=window.Highcharts.defaultOptions.lang.navigation.popup.indicatorAliases[e.prototype.type][0])}}function changeEventRaumFilter(){var e=document.getElementById("Select-Raum").value,t=document.getElementById("Select-Gewerk").value;let n=!1,o,r;for(let e=window.H2buffer.chart.series.length-1;0<=e;e--)window.H2buffer.chart.series[e].remove(!1);for(let i of window.H2buffer.DataPoints)if(checkFilter(e,t,window.H2buffer.filter_feld,window.H2buffer.Limit,i)){addSerie(i,""),r=window.H2buffer.chart.get(i.idx.toString());var a=window.H2buffer.DataAttr.findIndex(e=>e.id===i.idx.toString());if(-1!==a){2===window.H2buffer.DataAttr[a].visible?(r.visible=!0,n=!0):r.visible=!1;let t=window.H2buffer.DataAttr[a].comp;"C0"!==t&&(o=window.H2buffer.DataAttr.findIndex(e=>e.id===t+"_"+i.idx.toString()),-1===o&&(window.H2buffer.DataAttr.push({id:t+"_"+i.idx.toString(),aggr:window.H2buffer.DataAttr[a].aggr,atime:window.H2buffer.DataAttr[a].atime,yaxis:window.H2buffer.DataAttr[a].yaxis,comp:"C0",line:window.H2buffer.DataAttr[a].line,mark:window.H2buffer.DataAttr[a].mark,color:window.H2buffer.DataAttr[a].color,visible:window.H2buffer.DataAttr[a].visible,dash:"D1",width:window.H2buffer.DataAttr[a].width,stack:window.H2buffer.DataAttr[a].stack,factor:window.H2buffer.DataAttr[a].factor,offset:window.H2buffer.DataAttr[a].offset,unit:window.H2buffer.DataAttr[a].unit,shortname:"",buffer_data:{timestamps:[],values:[],buffer_start:0,buffer_end:0}}),o=window.H2buffer.DataAttr.length-1),addSerie(i,t),r=window.H2buffer.chart.get(window.H2buffer.DataAttr[o].id),r&&(2===window.H2buffer.DataAttr[o].visible?(r.visible=!0,n=!0):r.visible=!1))}}n?(loadNewSerienData(),loadNewAxisInfo()):(loadNewPlotBand(),loadNewAxisInfo(),window.H2buffer.chart.redraw())}function checkFilter(e,t,i,n,o){if(o.historyDisabled&&(0===window.H2buffer.DataPointFilter||2===window.H2buffer.DataPointFilter))return!1;if(o.historyHidden&&(0===window.H2buffer.DataPointFilter||1===window.H2buffer.DataPointFilter))return!1;if("ALLES"!==e&&"SYSVAR"!==e){if(null===o.attributes.room)return!1;if(-1===o.attributes.room.indexOf(e))return!1}if("ALLES"!==e&&"SYSVAR"===e&&"SysVar"!==o.id.interfaceId)return!1;if("ALLES"!==t){if(null===o.attributes.function)return!1;if(-1===o.attributes.function.indexOf(t))return!1}var r;if(""!==i)for(r of i.split(" "))if(-1===(o.displayName+"/"+o.id.address+"/ID:"+o.idx).toLowerCase().indexOf(r))return!1;if(n){n=window.H2buffer.DataAttr.findIndex(e=>e.id===o.idx.toString());if(-1===n)return!1;if(0===window.H2buffer.DataAttr[n].visible)return!1}return!0}function loadNewSerienData(){for(var e of window.H2buffer.chart.series)e.visible&&"nav"!==e.options.group&&setData(e);loadNewPlotBand(),window.H2buffer.chart.redraw(),loadNewAxisInfo(),loadingInfo()}function loadNewAxisInfo(){let t=0;var i=2===window.H2buffer.Grid||3===window.H2buffer.Grid||5===window.H2buffer.Grid||6===window.H2buffer.Grid?1:0,n=5===window.H2buffer.Grid||6===window.H2buffer.Grid?1:0;let o;for(o=0;o<window.H2buffer.yAxis.length;o++){let e=!1;for(var r of window.H2buffer.chart.yAxis[o].series)if(r.visible){e=!0;break}if(e){t++;let e=null;if(0===window.H2buffer.yAxis[o].color)e=window.Highcharts.defaultOptions.yAxis.lineColor;else if(1===window.H2buffer.yAxis[o].color&&0<window.H2buffer.chart.yAxis[o].series.length){for(var a of window.H2buffer.chart.yAxis[o].series)if(a.visible){e=a.color;break}}else 1<window.H2buffer.yAxis[o].color&&window.H2buffer.yAxis[o].color<window.H2buffer.chart.options.colors.length+2&&(e=window.H2buffer.chart.options.colors[window.H2buffer.yAxis[o].color-2]);null!==e&&e!==window.H2buffer.chart.yAxis[o].options.lineColor?window.H2buffer.chart.yAxis[o].update({lineColor:e,labels:{style:{color:e}},title:{style:{color:e}},gridLineWidth:1===t?i:0,minorGridLineWidth:1===t?n:0,minorTickInterval:5===window.H2buffer.Grid||6===window.H2buffer.Grid?"auto":null,visible:!0},!1):window.H2buffer.chart.yAxis[o].update({gridLineWidth:1===t?i:0,minorGridLineWidth:1===t?n:0,minorTickInterval:5===window.H2buffer.Grid||6===window.H2buffer.Grid?"auto":null,visible:!0},!1),0===window.H2buffer.yAxis[o].limit||1===window.H2buffer.yAxis[o].limit?window.H2buffer.chart.yAxis[o].setExtremes(null,null):2===window.H2buffer.yAxis[o].limit&&window.H2buffer.chart.yAxis[o].setExtremes(parseFloat(window.H2buffer.yAxis[o].min),parseFloat(window.H2buffer.yAxis[o].max))}else window.H2buffer.chart.yAxis[o].update({visible:!1},!1)}window.H2buffer.chart.redraw(),$(".highcharts-yaxis").off("click",function(){clickShowDialogYAxis(this)}),$(".highcharts-yaxis").on("click",function(){clickShowDialogYAxis(this)}),$(".highcharts-yaxis-labels").off("click",function(){clickShowDialogYAxis(this)}),$(".highcharts-yaxis-labels").on("click",function(){clickShowDialogYAxis(this)})}function loadNewPlotBand(){for(let e=window.H2buffer.chart.xAxis[0].plotLinesAndBands.length-1;0<=e;e--){var t=window.H2buffer.chart.xAxis[0].plotLinesAndBands[e].id;window.H2buffer.chart.xAxis[0].plotLinesAndBands[e].options.to?window.H2buffer.chart.xAxis[0].removePlotBand(t):window.H2buffer.chart.xAxis[0].removePlotLine(t)}let e,i,n=1,o=window.H2buffer.chart.xAxis.reduce((e,t)=>e.min>t.min?e:t).min,r=window.H2buffer.chart.xAxis.reduce((e,t)=>e.max>t.max?e:t).max;if((!o||o>window.H2buffer.ZR_Start.getTime())&&(o=window.H2buffer.ZR_Start.getTime()),(!r||r<window.H2buffer.ZR_Ende.getTime())&&(r=window.H2buffer.ZR_Ende.getTime()),!(3024e6<r-o))if(1===window.H2buffer.DayLight)for(e=o;e<=r;e+=864e5)i=new Date(e),window.H2buffer.chart.xAxis[0].addPlotBand({color:"rgba(239,232,231,0.5)",from:i.setHours(0,0,0,0),to:i.setHours(6,0,0,0),id:"DayLight1"+n.toString()}),window.H2buffer.chart.xAxis[0].addPlotBand({color:"rgba(251,252,227,0.5)",from:i.setHours(6,0,0,0),to:i.setHours(20,0,0,0),id:"DayLight2"+n.toString()}),window.H2buffer.chart.xAxis[0].addPlotBand({color:"rgba(239,232,231,0.5)",from:i.setHours(20,0,0,0),to:i.setHours(23,59,59,999),id:"DayLight3"+n.toString()}),n++;else if(2===window.H2buffer.DayLight)for(e=o;e<=r;e+=864e5)i=new Date(e),window.H2buffer.chart.xAxis[0].addPlotLine({color:"#EFE8E7",value:i.setHours(6,0,0,0),width:2,id:"DayLight1"+n.toString()}),window.H2buffer.chart.xAxis[0].addPlotBand({color:"#EFE8E7",value:i.setHours(20,0,0,0),width:2,id:"DayLight2"+n.toString()}),n++;else if(3===window.H2buffer.DayLight)for(e=o;e<=r;e+=864e5)i=new Date(e),window.H2buffer.chart.xAxis[0].addPlotLine({color:"#EFE8E7",value:i.setHours(0,0,0,0),width:2,id:"DayLight1"+n.toString()}),n++}function createUrl(){var e=location.pathname+"?";return e+=generateUrl(),window.open(e,"_blank"),window.focus(),!0}function generateUrl(){let e="periode="+(Math.round((window.H2buffer.ZR_Ende-window.H2buffer.ZR_Start)/36e5*100)/100).toString(),t=createUrlSerie();0<t.length&&(e+="&dp="+t.substring(0,t.length-1)),t=createUrlAxis(),0<t.length&&(e+="&yaxis="+t.substring(0,t.length-1)),e+="&setting=",e+="L"+window.H2buffer.Legend.toString(),e+="|N"+window.H2buffer.Navigator.toString(),e+="|P"+window.H2buffer.Labels.toString(),e+="|D"+window.H2buffer.DayLight.toString(),e+="|G"+window.H2buffer.Grid.toString(),e+="|F"+window.H2buffer.ShowFilter.toString(),e+="|I"+window.H2buffer.DataPointFilter.toString(),e+="|B"+window.H2buffer.Theme,e+="|O"+window.H2buffer.FontSize,e+="|C"+window.H2buffer.CrossHair.toString(),e+="|M"+window.H2buffer.ToolTip.toString(),e+="|H"+window.H2buffer.HighLight.toString(),e+="|R"+window.H2buffer.AutoRefresh,e+="|T"+encodeURIComponent(window.H2buffer.Title).replace(/'/g,"%27"),e+="|S"+encodeURIComponent(window.H2buffer.Subtitle).replace(/'/g,"%27");var i=document.getElementById("Select-Raum").value;"ALLES"!==i&&(e+="&room="+i);i=document.getElementById("Select-Gewerk").value;"ALLES"!==i&&(e+="&function="+i),""!==window.H2buffer.filter_feld&&(e+="&filterkey="+window.H2buffer.filter_feld);i=window.H2buffer.chart.xAxis[0].getExtremes();return(i.max<i.dataMax||i.min>i.dataMin)&&(e+="&zoom="+(Math.round((i.max-i.min)/36e5*100)/100).toString()),e}function createUrlSerie(){let e,i="";for(let t of window.H2buffer.chart.series){var n;"nav"===t.options.group||"MinMax"===t.options.name||-1!==(n=window.H2buffer.DataAttr.findIndex(e=>e.id===t.options.id.toString()))&&(2===window.H2buffer.DataAttr[n].visible||1===window.H2buffer.DataAttr[n].visible&&window.H2buffer.Limit)&&(i+=t.options.id,i+="|"+window.H2buffer.DataAttr[n].aggr,i+="|"+window.H2buffer.DataAttr[n].atime,i+="|"+window.H2buffer.DataAttr[n].yaxis,i+="|"+window.H2buffer.DataAttr[n].line,i+="|"+window.H2buffer.DataAttr[n].color,i+="|"+window.H2buffer.DataAttr[n].comp,i+="|"+window.H2buffer.DataAttr[n].mark,i+="|"+window.H2buffer.DataAttr[n].dash,i+="|"+window.H2buffer.DataAttr[n].width,i+="|S"+window.H2buffer.DataAttr[n].stack,i+="|X"+window.H2buffer.DataAttr[n].factor,i+="|O"+window.H2buffer.DataAttr[n].offset,e="C"===t.options.id.substr(0,1)?window.H2buffer.DataPoints.findIndex(e=>e.idx.toString()===t.options.id.split("_")[1].toString()):window.H2buffer.DataPoints.findIndex(e=>e.idx.toString()===t.options.id.toString()),-1!==e&&window.H2buffer.DataPoints[e].attributes.unit===window.H2buffer.DataAttr[n].unit||(i+="|U"+window.H2buffer.DataAttr[n].unit.replaceAll("%","§").replaceAll("&","µ")),""!==window.H2buffer.DataAttr[n].shortname&&(i+="|N"+window.H2buffer.DataAttr[n].shortname.replaceAll("%","§").replaceAll("&","µ")),i+="|V"+window.H2buffer.DataAttr[n].visible,i+=",")}return i}function createUrlAxis(){let t="";for(let e=0;e<window.H2buffer.yAxis.length;e++)window.H2buffer.chart.yAxis[e].visible&&window.H2buffer.chart.yAxis[e].hasVisibleSeries&&(t+="Y"+e,t+="|P"+(window.H2buffer.yAxis[e].position?"1":"0"),t+="|C"+window.H2buffer.yAxis[e].type,t+="|A"+window.H2buffer.yAxis[e].limit,t+="|L"+window.H2buffer.yAxis[e].min,t+="|H"+window.H2buffer.yAxis[e].max,t+="|G"+window.H2buffer.yAxis[e].tick,t+="|F"+window.H2buffer.yAxis[e].color,window.H2buffer.yAxis[e].text?t+="|T"+window.H2buffer.yAxis[e].text.replaceAll("%","§").replaceAll("&","µ"):t+="|T",t+=",");return t}function autoRefresh(){var e;0<window.H2buffer.AutoRefresh?(setTimeout(autoRefresh,1e3),window.H2buffer.Navigator<3&&(document.getElementById("autorefresh").innerHTML=" - "+window.ChhLanguage.default.historian.autorefreshText+":"+window.H2buffer.AutoRefreshCount+" Sek."),window.H2buffer.AutoRefreshCount--,window.H2buffer.AutoRefreshCount<=0&&(window.H2buffer.AutoRefreshCount=window.H2buffer.AutoRefresh,e=window.H2buffer.ZR_Ende.getTime()-window.H2buffer.ZR_Start.getTime(),window.H2buffer.ZR_Ende=new Date(Date.now()),window.H2buffer.ZR_Start=new Date(window.H2buffer.ZR_Ende-new Date(e)),((e=window.H2buffer.chart.xAxis[0].getExtremes()).max<e.dataMax||e.min>e.dataMin)&&(window.H2buffer.Zoom=Math.round((e.max-e.min)/36e5*100)/100),loadNewSerienData())):document.getElementById("autorefresh").innerHTML=""}function loadingInfo(){if(0<window.H2buffer.Queue.length)window.H2buffer.chart.showLoading();else if(window.H2buffer.chart.hideLoading(),window.H2buffer.Button_Jump)window.H2buffer.chart.xAxis[0].setExtremes(window.H2buffer.ZR_Start.getTime(),window.H2buffer.ZR_Ende.getTime(),!0),window.H2buffer.Button_Jump=!1;else if(0<window.H2buffer.Zoom){let e=new Date(window.H2buffer.ZR_Ende-new Date(36e5*window.H2buffer.Zoom));window.H2buffer.chart.xAxis[0].setExtremes(e.getTime(),window.H2buffer.ZR_Ende.getTime(),!0),window.H2buffer.Zoom=0}0<window.H2buffer.Queue.length&&window.H2buffer.Navigator<3?(window.H2buffer.Loading!==window.H2buffer.Queue.length&&(document.getElementById("loading").innerHTML=" (Loading - "+window.H2buffer.Queue.length+') <img src="loading.gif" alt="loading" height="20" width="20">',window.H2buffer.Loading=window.H2buffer.Queue.length),setTimeout(loadingInfo,500)):0<window.H2buffer.Loading&&(document.getElementById("loading").innerHTML="",window.H2buffer.Loading=0)}function addAggregationMinMax(t){let i=[];for(let e=window.H2buffer.chart.series.length-1;0<=e;e--)t.options.id===window.H2buffer.chart.series[e].options.linkedTo&&"MinMax"===window.H2buffer.chart.series[e].options.name&&window.H2buffer.chart.series[e].remove(!1);t.userOptions.data.forEach(function(e){i.push([e[0],e[1],e[1]])}),window.H2buffer.chart.addSeries({name:"MinMax",fillOpacity:.4,color:t.color,yAxis:t.options.yAxis,linkedTo:t.options.id,type:"arearange",lineWidth:1,dataGrouping:{enabled:!0,forced:!0,groupPixelWidth:10,units:t.userOptions.dataGrouping.units},data:i,tooltip:{valueDecimals:t.userOptions.tooltip.valueDecimals,valueSuffix:t.userOptions.tooltip.valueSuffix}})}function showDialogLine(n){if(n.options.id){"C"===n.options.id.toString().substr(0,1)?document.getElementById("compare").style.display="none":document.getElementById("compare").style.display="";let e="",t;t="C"===n.options.id.substr(0,1)?window.H2buffer.DataPoints.findIndex(e=>e.idx.toString()===n.options.id.split("_")[1].toString()):window.H2buffer.DataPoints.findIndex(e=>e.idx.toString()===n.options.id.toString()),e=-1===t?"n/a":"SysVar"===window.H2buffer.DataPoints[t].id.interfaceId?"<br/>Systemvariable":"<br/>"+window.H2buffer.DataPoints[t].id.interfaceId+"."+window.H2buffer.DataPoints[t].id.address+"."+window.H2buffer.DataPoints[t].id.identifier,window.H2buffer.PopupID=n.options.id.toString();let i=window.H2buffer.DataAttr.findIndex(e=>e.id===n.options.id.toString());if(-1===i){let e;e=-1===t?defaultAttrib(-1,n.colorIndex,window.H2buffer.PopupID):defaultAttrib(window.H2buffer.DataPoints[t],n.colorIndex,window.H2buffer.PopupID),window.H2buffer.DataAttr.push(e),i=window.H2buffer.DataAttr.length-1}document.getElementsByClassName("modal-title")[0].innerHTML=n.name+e,document.getElementById("Select-Aggregation").value=window.H2buffer.DataAttr[i].aggr,document.getElementById("Select-AggrTime").value=window.H2buffer.DataAttr[i].atime,document.getElementById("Select-Yaxis").value=window.H2buffer.DataAttr[i].yaxis,document.getElementById("Select-Compare").value=window.H2buffer.DataAttr[i].comp,document.getElementById("Select-Stacking").value=window.H2buffer.DataAttr[i].stack,document.getElementById("Select-Line").value=window.H2buffer.DataAttr[i].line,document.getElementById("Select-Color").value=window.H2buffer.DataAttr[i].color,document.getElementById("Select-Marker").value=window.H2buffer.DataAttr[i].mark,document.getElementById("Select-DashType").value=window.H2buffer.DataAttr[i].dash,document.getElementById("Select-LineWidth").value=window.H2buffer.DataAttr[i].width,document.getElementById("Line-Factor").value=window.H2buffer.DataAttr[i].factor,document.getElementById("Line-OffSet").value=window.H2buffer.DataAttr[i].offset,document.getElementById("Line-Unit").value=window.H2buffer.DataAttr[i].unit,document.getElementById("Line-ShortName").value=window.H2buffer.DataAttr[i].shortname,document.getElementById("Select-Color").style.backgroundColor=window.H2buffer.chart.options.colors[parseInt(document.getElementById("Select-Color").value.substr(1,2))],$("#LinePopup").modal()}}function saveLine(){getDialogLine();var e,t,i,n=window.H2buffer.DataAttr.findIndex(e=>e.id===window.H2buffer.PopupID);-1!==n&&(i="",i+=window.H2buffer.DataAttr[n].aggr,i+="|"+window.H2buffer.DataAttr[n].atime,i+="|"+window.H2buffer.DataAttr[n].yaxis,i+="|"+window.H2buffer.DataAttr[n].line,i+="|"+window.H2buffer.DataAttr[n].color,i+="|"+window.H2buffer.DataAttr[n].comp,i+="|"+window.H2buffer.DataAttr[n].mark,i+="|"+window.H2buffer.DataAttr[n].dash,i+="|"+window.H2buffer.DataAttr[n].width,i+="|S"+window.H2buffer.DataAttr[n].stack,i+="|X"+window.H2buffer.DataAttr[n].factor,i+="|O"+window.H2buffer.DataAttr[n].offset,i+="|U"+encodeURIComponent(window.H2buffer.DataAttr[n].unit).replace(/'/g,"%27"),i+="|N"+encodeURIComponent(window.H2buffer.DataAttr[n].shortname).replace(/'/g,"%27"),e=window.H2buffer.DataPoints.findIndex(e=>e.idx.toString()===window.H2buffer.PopupID),t="POINT"+window.H2buffer.PopupID,window.H2buffer.DataPoints[e].attributes.custom||(window.H2buffer.DataPoints[e].attributes.custom={}),window.H2buffer.DataPoints[e].attributes.custom.HighChart!==i&&(window.H2buffer.DataPoints[e].attributes.custom.HighChart=i,setLocalData("DataPoints",JSON.stringify(window.H2buffer.DataPoints)),setLocalData("DataPointsTime",Date.now()),n="http://"+window.H2buffer.server+":"+window.H2buffer.port,n+="/query/jsonrpc.gy",n+=""===window.H2buffer.ApiKey?"":"?"+window.H2buffer.ApiKey,i={id:t,method:"updateDataPoint",params:[{id:{interfaceId:window.H2buffer.DataPoints[e].id.interfaceId,address:window.H2buffer.DataPoints[e].id.address,identifier:window.H2buffer.DataPoints[e].id.identifier},attributes:{custom:{HighChart:i}}}]},i=JSON.stringify(i),$.ajax({url:n,dataType:"json",contentType:"application/json",type:"post",data:i,cache:!1,async:!0,error:function(e,t,i){ajaxErrorOutput(e,t,i)},success:function(e){console.log(e)}})))}function getDialogLine(){var e,t=window.H2buffer.DataAttr.findIndex(e=>e.id===window.H2buffer.PopupID);window.H2buffer.DataAttr[t].comp===document.getElementById("Select-Compare").value||"C0"===document.getElementById("Select-Compare").value||"C0"===window.H2buffer.DataAttr[t].comp||-1!==(e=window.H2buffer.DataAttr.findIndex(e=>"C"===e.id.substr(0,1)&&e.id.split("_")[1]===window.H2buffer.PopupID))&&(window.H2buffer.DataAttr[e].id=document.getElementById("Select-Compare").value+"_"+window.H2buffer.PopupID),window.H2buffer.DataAttr[t].aggr=document.getElementById("Select-Aggregation").value,window.H2buffer.DataAttr[t].atime=document.getElementById("Select-AggrTime").value,window.H2buffer.DataAttr[t].yaxis=document.getElementById("Select-Yaxis").value,window.H2buffer.DataAttr[t].comp=document.getElementById("Select-Compare").value,window.H2buffer.DataAttr[t].stack=parseInt(document.getElementById("Select-Stacking").value),window.H2buffer.DataAttr[t].line=document.getElementById("Select-Line").value,window.H2buffer.DataAttr[t].color=document.getElementById("Select-Color").value,window.H2buffer.DataAttr[t].mark=document.getElementById("Select-Marker").value,window.H2buffer.DataAttr[t].dash=document.getElementById("Select-DashType").value,window.H2buffer.DataAttr[t].width=document.getElementById("Select-LineWidth").value,window.H2buffer.DataAttr[t].factor=parseFloat(document.getElementById("Line-Factor").value),window.H2buffer.DataAttr[t].offset=parseFloat(document.getElementById("Line-OffSet").value),window.H2buffer.DataAttr[t].unit=document.getElementById("Line-Unit").value,window.H2buffer.DataAttr[t].shortname=document.getElementById("Line-ShortName").value,!isNaN(window.H2buffer.DataAttr[t].factor)&&0!==window.H2buffer.DataAttr[t].factor||(window.H2buffer.DataAttr[t].factor=1),$("#LinePopup").modal("hide"),changeEventRaumFilter()}function showDialogSettings(){document.getElementsByClassName("modal-title2")[0].innerHTML=window.ChhLanguage.default.historian.settings,document.getElementById("Select-Legend").value=window.H2buffer.Legend.toString(),document.getElementById("Select-Navigator").value=window.H2buffer.Navigator.toString(),document.getElementById("Select-Label").value=window.H2buffer.Labels.toString(),document.getElementById("Select-Layout").value=window.H2buffer.DayLight.toString(),document.getElementById("Select-Grid").value=window.H2buffer.Grid.toString(),document.getElementById("Select-Content").value=window.H2buffer.ShowFilter.toString(),document.getElementById("Select-DataPoint").value=window.H2buffer.DataPointFilter.toString(),document.getElementById("Select-Theme").value=window.H2buffer.Theme,document.getElementById("Select-FontSize").value=window.H2buffer.FontSize,document.getElementById("Select-CrossHair").value=window.H2buffer.CrossHair.toString(),document.getElementById("Select-ToolTip").value=window.H2buffer.ToolTip.toString(),document.getElementById("Select-HighLight").value=window.H2buffer.HighLight.toString(),document.getElementById("Line-Refresh").value=window.H2buffer.AutoRefresh,document.getElementById("Line-Title").value=window.H2buffer.Title,document.getElementById("Line-Subtitle").value=window.H2buffer.Subtitle,$("#SettingPopup").modal()}function saveSetting(){getDialogSetting();var e="";e+="L"+window.H2buffer.Legend.toString(),e+="|N"+window.H2buffer.Navigator.toString(),e+="|P"+window.H2buffer.Labels.toString(),e+="|D"+window.H2buffer.DayLight.toString(),e+="|G"+window.H2buffer.Grid.toString(),e+="|F"+window.H2buffer.ShowFilter.toString(),e+="|I"+window.H2buffer.DataPointFilter.toString(),e+="|B"+window.H2buffer.Theme,e+="|O"+window.H2buffer.FontSize,e+="|C"+window.H2buffer.CrossHair.toString(),e+="|M"+window.H2buffer.ToolTip.toString(),e+="|H"+window.H2buffer.HighLight.toString(),e+="|R"+window.H2buffer.AutoRefresh,e+="|T"+encodeURIComponent(window.H2buffer.Title).replace(/'/g,"%27"),e+="|S"+encodeURIComponent(window.H2buffer.Subtitle).replace(/'/g,"%27"),window.H2buffer.Settings.Setting=e,saveSettingsH2()}function saveSettingsH2(){let e=JSON.stringify(window.H2buffer.Settings);var t,i=JSON.stringify(window.H2buffer.Settings_old);e!==i&&(setLocalData("setting",e),setLocalData("settingTime",Date.now()),window.H2buffer.Settings_old=JSON.parse(e),t="http://"+window.H2buffer.server+":"+window.H2buffer.port,t+="/query/jsonrpc.gy",t+=""===window.H2buffer.ApiKey?"":"?"+window.H2buffer.ApiKey,e=e.replace(/'/g,"'"),i={id:"SETTING",method:"setConfig",params:["HighChart",e]},i=JSON.stringify(i),$.ajax({url:t,dataType:"json",contentType:"application/json",type:"post",data:i,cache:!1,async:!0,error:function(e,t,i){ajaxErrorOutput(e,t,i)},success:function(e){console.log(e)}}))}function getDialogSetting(){$("#SettingPopup").modal("hide");let e=!1,t=!1;window.H2buffer.Legend.toString()!==document.getElementById("Select-Legend").value&&(window.H2buffer.Legend=parseInt(document.getElementById("Select-Legend").value),t=!0),window.H2buffer.Navigator.toString()!==document.getElementById("Select-Navigator").value&&(window.H2buffer.Navigator=parseInt(document.getElementById("Select-Navigator").value),t=!0),window.H2buffer.Title!==document.getElementById("Line-Title").value&&(window.H2buffer.Title=document.getElementById("Line-Title").value,t=!0),window.H2buffer.Subtitle!==document.getElementById("Line-Subtitle").value&&(window.H2buffer.Subtitle=document.getElementById("Line-Subtitle").value,t=!0),window.H2buffer.Labels.toString()!==document.getElementById("Select-Label").value&&(window.H2buffer.Labels=parseInt(document.getElementById("Select-Label").value),e=!0),window.H2buffer.DayLight.toString()!==document.getElementById("Select-Layout").value&&(window.H2buffer.DayLight=parseInt(document.getElementById("Select-Layout").value),e=!0),window.H2buffer.Grid.toString()!==document.getElementById("Select-Grid").value&&(window.H2buffer.Grid=parseInt(document.getElementById("Select-Grid").value),chartSetOptions(),e=!0),window.H2buffer.ShowFilter.toString()!==document.getElementById("Select-Content").value&&(window.H2buffer.ShowFilter=parseInt(document.getElementById("Select-Content").value),showFilterLine(),chartSetOptions(),e=!0),window.H2buffer.DataPointFilter.toString()!==document.getElementById("Select-DataPoint").value&&(window.H2buffer.DataPointFilter=parseInt(document.getElementById("Select-DataPoint").value),t=!0),window.H2buffer.Theme!==document.getElementById("Select-Theme").value&&(window.H2buffer.Theme=document.getElementById("Select-Theme").value,t=!0),window.H2buffer.FontSize.toString()!==document.getElementById("Select-FontSize").value&&(window.H2buffer.FontSize=parseInt(document.getElementById("Select-FontSize").value),t=!0),window.H2buffer.CrossHair.toString()!==document.getElementById("Select-CrossHair").value&&(window.H2buffer.CrossHair=parseInt(document.getElementById("Select-CrossHair").value),t=!0),window.H2buffer.ToolTip.toString()!==document.getElementById("Select-ToolTip").value&&(window.H2buffer.ToolTip=parseInt(document.getElementById("Select-ToolTip").value),t=!0),window.H2buffer.HighLight.toString()!==document.getElementById("Select-HighLight").value&&(window.H2buffer.HighLight=parseInt(document.getElementById("Select-HighLight").value),t=!0),window.H2buffer.AutoRefresh!==parseInt(document.getElementById("Line-Refresh").value)&&(window.H2buffer.refreshSec=parseInt(document.getElementById("Line-Refresh").value),window.H2buffer.AutoRefreshCount=window.H2buffer.refreshSec,0===window.H2buffer.AutoRefresh&&0<window.H2buffer.refreshSec&&setTimeout(autoRefresh,1e3),window.H2buffer.AutoRefresh=window.H2buffer.refreshSec),t?createChart():e&&changeEventRaumFilter()}function showDialogFav(){if(document.getElementsByClassName("modal-title4")[0].innerHTML=window.ChhLanguage.default.historian.favoritTitle,document.getElementById("Line-Title4").value="",document.getElementById("Text-Title4").innerHTML=window.ChhLanguage.default.historian.favoritName,document.getElementById("favAdd").innerHTML=window.ChhLanguage.default.historian.favoritNEW,window.H2buffer.Settings.Favorites){let e=document.getElementById("favList");e.childNodes&&0<e.childNodes.length&&e.removeChild(e.childNodes[0]);let t=document.createElement("table");t.setAttribute("width","100%"),t.setAttribute("style","border: 0px; margin-top: 22px;");let a=document.createElement("tbody");for(let r=0;r<window.H2buffer.Settings.Favorites.length;r++){let e=document.createElement("tr"),t=document.createElement("td");t.setAttribute("style","border: 0px;");let i=document.createElement("button");i.innerHTML=decodeURIComponent(window.H2buffer.Settings.Favorites[r].Name),i.setAttribute("class","bnt btn-default"),i.setAttribute("onclick","executeFav("+r+");"),i.setAttribute("draggable","true"),i.setAttribute("ondragstart","drag(event,"+r+")"),i.setAttribute("ondrop","drop(event,"+r+")"),i.setAttribute("ondragover","allowDrop(event,"+r+")"),i.setAttribute("style","width: 90%;"),t.appendChild(i),e.appendChild(t);let n=document.createElement("td");n.setAttribute("style","border: 0px;");let o=document.createElement("button");o.setAttribute("class","bnt btn-default"),o.setAttribute("onclick","deleteFav("+r+");"),o.setAttribute("style","font-size: 21px;"),o.textContent="x",n.appendChild(o),e.appendChild(n),a.appendChild(e)}t.appendChild(a),e.appendChild(t),t.setAttribute("border","2")}$("#FavPopup").modal()}function allowDrop(e){return e.preventDefault(),!1}function drag(e,t){window.H2buffer.Drag_Pos=t,e.dataTransfer.setData("text",e.target.id)}function drop(e,t){e.stopPropagation();e=window.H2buffer.Settings.Favorites[window.H2buffer.Drag_Pos];return window.H2buffer.Settings.Favorites.splice(window.H2buffer.Drag_Pos,1),window.H2buffer.Settings.Favorites.splice(t,0,e),saveSettingsH2(),showDialogFav(),!1}function deleteFav(e){$("#FavPopup").modal("hide"),window.H2buffer.Settings.Favorites[e]&&(window.H2buffer.Settings.Favorites.splice(e,1),saveSettingsH2())}function executeFav(e){$("#FavPopup").modal("hide"),window.H2buffer.Settings.Favorites[e]&&(e=location.pathname+"?"+decodeURIComponent(window.H2buffer.Settings.Favorites[e].Url),window.open(e,"_self"))}function getDialogFav(){$("#FavPopup").modal("hide"),document.getElementById("Line-Title4").value&&(window.H2buffer.Settings.Favorites||(window.H2buffer.Settings.Favorites=[]),window.H2buffer.Settings.Favorites.push({Name:encodeURIComponent(document.getElementById("Line-Title4").value).replace(/'/g,"%27"),Url:encodeURIComponent(generateUrl()).replace(/'/g,"%27")}),saveSettingsH2())}function showFilterLine(){0===window.H2buffer.ShowFilter?(document.getElementById("filter").style.display="none",$("nav.navbar.navbar-default")[0].style.display="none"):1===window.H2buffer.ShowFilter?(document.getElementById("filter").style.display="block",$("nav.navbar.navbar-default")[0].style.display="block"):2===window.H2buffer.ShowFilter?(document.getElementById("filter").style.display="block",$("nav.navbar.navbar-default")[0].style.display="none"):3===window.H2buffer.ShowFilter&&(document.getElementById("filter").style.display="none",$("nav.navbar.navbar-default")[0].style.display="block"),document.getElementById("container").setAttribute("style","height:"+calcContSize().toString()+"px"),window.H2buffer.chart&&window.H2buffer.chart.setSize(null,null,!1)}function defineLegend(){let e={};return e=0===window.H2buffer.Legend?{enabled:!1}:2===window.H2buffer.Legend?{enabled:!0,layout:"vertical",align:"right",verticalAlign:"top",floating:!1,y:window.H2buffer.Navigator<4?-30:0,maxHeight:$(window).height()-(0===window.H2buffer.ShowFilter?90:0)-(1===window.H2buffer.ShowFilter?200:0)-(2===window.H2buffer.ShowFilter?120:0)-(3===window.H2buffer.ShowFilter?180:0)}:3===window.H2buffer.Legend?{enabled:!0,layout:"horizontal",align:"center",verticalAlign:"top",floating:!0,y:10+(""===window.H2buffer.Title?0:window.H2buffer.FontSize+20)+(""===window.H2buffer.Subtitle?0:window.H2buffer.FontSize/6+5+15),maxHeight:200}:4===window.H2buffer.Legend?{enabled:!0,layout:"horizontal",align:"center",verticalAlign:"bottom",floating:!0,y:-30-window.H2buffer.FontSize-(0===window.H2buffer.Navigator?20+4.5*window.H2buffer.FontSize:0)-(1===window.H2buffer.Navigator?15+3.5*window.H2buffer.FontSize:0)-(2===window.H2buffer.Navigator?11+2*window.H2buffer.FontSize:0),maxHeight:200}:5===window.H2buffer.Legend?{enabled:!0,layout:"horizontal",align:"center",verticalAlign:"top",floating:!1,y:0,maxHeight:200}:6===window.H2buffer.Legend?{enabled:!0,layout:"horizontal",align:"center",verticalAlign:"bottom",floating:!1,y:0,maxHeight:200}:{enabled:!0,layout:"vertical",align:"left",verticalAlign:"top",floating:!1,y:window.H2buffer.Navigator<4?-30:0,maxHeight:$(window).height()-(0===window.H2buffer.ShowFilter?90:0)-(1===window.H2buffer.ShowFilter?200:0)-(2===window.H2buffer.ShowFilter?120:0)-(3===window.H2buffer.ShowFilter?180:0)},e.x=0,e}function showDialogYAxis(e){document.getElementsByClassName("modal-title3")[0].innerHTML=window.ChhLanguage.default.historian.axissetting+" "+e.substr(5,2);e=parseInt(e.substr(5,2));0<=e&&e<window.H2buffer.chart.options.yAxis.length&&(window.H2buffer.PopupAxisPos=e,document.getElementById("Line-Title3").value=window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].text,document.getElementById("Select-Position").value=window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].position?"1":"0",document.getElementById("Line-Min").value=window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].min,document.getElementById("Line-Max").value=window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].max,document.getElementById("Line-TickAmount").value=window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].tick,document.getElementById("Select-AxisColor").value=window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].color,document.getElementById("Select-Limit").value=window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].limit,document.getElementById("Select-AxisType").value=window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].type,showDialogYAxisUpdatColor(),$("#AxisPopup").modal())}function getDialogAxis(){$("#AxisPopup").modal("hide");let e={title:{text:document.getElementById("Line-Title3").value},lineWidth:2,opposite:"1"===document.getElementById("Select-Position").value,type:"1"===document.getElementById("Select-AxisType").value?"logarithmic":"linear",tickAmount:parseInt(document.getElementById("Line-TickAmount").value),min:"2"===document.getElementById("Select-Limit").value?parseFloat(document.getElementById("Line-Min").value):null,max:"2"===document.getElementById("Select-Limit").value?parseFloat(document.getElementById("Line-Max").value):null,softMin:"1"===document.getElementById("Select-Limit").value?parseFloat(document.getElementById("Line-Min").value):null,softMax:"1"===document.getElementById("Select-Limit").value?parseFloat(document.getElementById("Line-Max").value):null,startOnTick:"2"!==document.getElementById("Select-Limit").value,endOnTick:"2"!==document.getElementById("Select-Limit").value,allowDecimals:!0,tickPositioner:null};"2"===document.getElementById("Select-Limit").value&&(e.tickPositioner=function(){const t=this;return t.tickPositions.map(e=>tickPos(t,e))}),window.H2buffer.chart.yAxis[window.H2buffer.PopupAxisPos].update(e),window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].text=document.getElementById("Line-Title3").value,window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].position=0!==parseInt(document.getElementById("Select-Position").value),window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].limit=parseInt(document.getElementById("Select-Limit").value),window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].type=parseInt(document.getElementById("Select-AxisType").value),window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].min=parseFloat(document.getElementById("Line-Min").value),window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].max=parseFloat(document.getElementById("Line-Max").value),window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].tick=parseInt(document.getElementById("Line-TickAmount").value),window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].color=parseInt(document.getElementById("Select-AxisColor").value),$("#Select-Yaxis").empty();let i=document.getElementById("Select-Yaxis");for(let t=0;t<window.H2buffer.yAxis.length;t++){let e=document.createElement("option");""!==window.H2buffer.yAxis[t].text&&null!==window.H2buffer.yAxis[t].text?e.text=window.H2buffer.yAxis[t].text:e.text=window.ChhLanguage.default.historian["yaxis"+t],e.value="Y"+t,i.add(e)}loadNewAxisInfo()}function defineYAxis(){let i=[];for(let t=0;t<window.H2buffer.yAxis.length;t++){let e={id:"AXISY"+t,className:"axisy"+t,type:1===window.H2buffer.yAxis[t].type?"logarithmic":"linear",title:{text:window.H2buffer.yAxis[t].text},lineWidth:2,opposite:window.H2buffer.yAxis[t].position,tickAmount:window.H2buffer.yAxis[t].tick,min:2===window.H2buffer.yAxis[t].limit?window.H2buffer.yAxis[t].min:null,max:2===window.H2buffer.yAxis[t].limit?window.H2buffer.yAxis[t].max:null,softMin:1===window.H2buffer.yAxis[t].limit?window.H2buffer.yAxis[t].min:null,softMax:1===window.H2buffer.yAxis[t].limit?window.H2buffer.yAxis[t].max:null,startOnTick:2!==window.H2buffer.yAxis[t].limit,endOnTick:2!==window.H2buffer.yAxis[t].limit,allowDecimals:!0,visible:!1,tickPositioner:null,crosshair:defineCrosshairY()};2===window.H2buffer.yAxis[t].limit&&(e.tickPositioner=function(){const t=this;return t.tickPositions.map(e=>tickPos(t,e))}),i.push(e)}return i}function tickPos(e,t){let i=t;return i>e.max?i=e.max:i<e.min&&(i=e.min),i}function showDialogYAxisUpdatColor(){let e=parseInt(document.getElementById("Select-AxisColor").value);0===e||1===e?document.getElementById("Select-AxisColor").style.backgroundColor=window.Highcharts.defaultOptions.yAxis.lineColor:(e-=2,document.getElementById("Select-AxisColor").style.backgroundColor=window.H2buffer.chart.options.colors[e])}function getComparisionBackDay(e){return"C1"===e?-864e5:"C2"===e?-1728e5:"C3"===e?-2592e5:"C4"===e?-3456e5:"C5"===e?-6048e5:"C6"===e?-12096e5:"C7"===e?-18144e5:"C8"===e||"C9"===e?-24192e5:"C10"===e?-48384e5:"C11"===e?-72576e5:"C12"===e?-96768e5:"C13"===e?-31536e6:0}function chartSetOptions(){let e="";window.Highcharts.getOptions().navigation&&window.Highcharts.getOptions().navigation.bindings&&window.Highcharts.getOptions().navigation.bindings.labelAnnotation&&(e=window.Highcharts.getOptions().navigation.bindings.labelAnnotation);var t={lang:window.ChhLanguage.default.highcharts,accessibility:{enabled:!1},chart:{events:{load:requestInitData,beforePrint:function(){var e;window.DP_Themes.transparent&&(e=window.Highcharts.merge(window.DP_Themes["standard-light"],window.DP_Themes.transparent),this.update(e))},afterPrint:function(){this.update(window.H2buffer.Theme_Setting),chartSetOptions(),chartSetElements()}},panning:!0,panKey:"shift",zoomType:"xy",resetZoomButton:{position:{x:-50,y:20},relativeTo:"plot",theme:{style:{"font-size":window.H2buffer.FontSize.toString()+"px"}}}},rangeSelector:{enabled:window.H2buffer.Navigator<4,buttons:[{count:30,type:"minute",text:window.ChhLanguage.default.historian.range30M,events:{click:function(){return checkZeitraum(this),!0}},title:window.ChhLanguage.default.historian.rangeTitle30M},{count:1,type:"hour",text:window.ChhLanguage.default.historian.rangeH,events:{click:function(){return checkZeitraum(this),!0}},title:window.ChhLanguage.default.historian.rangeTitleH},{count:6,type:"hour",text:window.ChhLanguage.default.historian.range6H,events:{click:function(){return checkZeitraum(this),!0}},title:window.ChhLanguage.default.historian.rangeTitle6H},{count:1,type:"day",text:window.ChhLanguage.default.historian.rangeD,events:{click:function(){return checkZeitraum(this),!0}},title:window.ChhLanguage.default.historian.rangeTitleD},{count:1,type:"week",text:window.ChhLanguage.default.historian.rangeW,events:{click:function(){return checkZeitraum(this),!0}},title:window.ChhLanguage.default.historian.rangeTitleW},{count:1,type:"month",text:window.ChhLanguage.default.historian.rangeM,events:{click:function(){return checkZeitraum(this),!0}},title:window.ChhLanguage.default.historian.rangeTitleM},{count:1,type:"year",text:window.ChhLanguage.default.historian.rangeY,events:{click:function(){return checkZeitraum(this),!0}},title:window.ChhLanguage.default.historian.rangeTitleY},{type:"all",text:window.ChhLanguage.default.historian.rangeALL,events:{click:function(){return checkZeitraum(this),!0}},title:window.ChhLanguage.default.historian.rangeTitleALL}],allButtonsEnabled:!0,inputEnabled:!1,selected:7,floating:!1,verticalAlign:"top",buttonPosition:{align:"left",x:0},x:0,y:10},navigator:{enabled:0===window.H2buffer.Navigator||1===window.H2buffer.Navigator},scrollbar:{enabled:0===window.H2buffer.Navigator||2===window.H2buffer.Navigator},credits:{enabled:window.H2buffer.Navigator<3,text:"(c) wak - H2-HighChart version "+window.H2buffer.version+" - verwendet Highstock v"+window.Highcharts.version+" http://www.highcharts.com - Kommerzielle Nutzung untersagt",href:"https://github.com/wakr70/CCU-Historian-HC"},exporting:{buttons:{contextButton:{symbol:"menu",enabled:window.H2buffer.Navigator<4,menuItems:[{text:window.ChhLanguage.default.historian.favoritTxt,onclick:function(){showDialogFav()}},{text:window.ChhLanguage.default.historian.settings,onclick:function(){showDialogSettings()}},{text:window.H2buffer.Limit?window.ChhLanguage.default.historian.limitactive:window.ChhLanguage.default.historian.limitdeactive,onclick:function(){return window.H2buffer.Limit?($(".highcharts-contextmenu")[0].children[0].children[2].innerHTML=window.ChhLanguage.default.historian.limitdeactive,window.H2buffer.Limit=!1):($(".highcharts-contextmenu")[0].children[0].children[2].innerHTML=window.ChhLanguage.default.historian.limitactive,window.H2buffer.Limit=!0),changeEventRaumFilter(),!0}},{text:window.ChhLanguage.default.historian.buttonRefresh,onclick:function(){return refreshClick(),!0}},{text:window.ChhLanguage.default.historian.buttonLink,onclick:function(){return createUrl(),!0}},"separator","viewFullscreen","printChart","downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS","viewData"]}}},title:{text:window.H2buffer.Title,floating:!1},subtitle:{text:window.H2buffer.Subtitle,floating:!1},xAxis:{crosshair:defineCrosshairX(),type:"datetime",ordinal:!1,gridLineWidth:1===window.H2buffer.Grid||3===window.H2buffer.Grid||4===window.H2buffer.Grid||6===window.H2buffer.Grid?1:0,minorGridLineWidth:4===window.H2buffer.Grid||6===window.H2buffer.Grid?1:0,minorTickInterval:4===window.H2buffer.Grid||6===window.H2buffer.Grid?"auto":null,dataMax:Date.now(),events:{afterSetExtremes:function(){showAggrText()}},dateTimeLabelFormats:{day:"%a %e. %b"}},yAxis:defineYAxis(),tooltip:defineToolTip(),plotOptions:{series:{states:defineHighLight(),events:{legendItemClick:function(e){let t;if(e.browserEvent.shiftKey)return showDialogLine(this),!1;if(this.visible||setData(this),this.visible){if(t=window.H2buffer.DataAttr.findIndex(e=>e.id===this.options.id.toString()),-1!==t&&(window.H2buffer.DataAttr[t].visible=window.H2buffer.Limit?1:0,"A3"===window.H2buffer.DataAttr[t].aggr))for(let e=window.H2buffer.chart.series.length-1;0<=e;e--)this.options.id===window.H2buffer.chart.series[e].options.linkedTo&&"MinMax"===window.H2buffer.chart.series[e].options.name&&window.H2buffer.chart.series[e].remove(!1)}else t=window.H2buffer.DataAttr.findIndex(e=>e.id===this.options.id.toString()),-1!==t&&(window.H2buffer.DataAttr[t].visible=2);return!0},show:function(){loadNewAxisInfo()},hide:function(){loadNewAxisInfo()},click:function(){let e=!1;return arguments[0]&&arguments[0].activeAnnotation&&(e=!0),e||showDialogLine(this),!0}}}},series:[{id:"series-init",name:"loading ....",data:[],yAxis:0,visible:!1}],navigation:{buttonOptions:{enabled:window.H2buffer.Navigator<4},bindings:{myText:e}},stockTools:{gui:{iconsURL:"stock-tools/stock-icons/",buttons:["indicators","separator","myText","lines","measure","toggleAnnotations","separator","verticalLabels","separator","zoomChange","fullScreen"],definitions:{zoomChange:{items:["zoomXY","zoomY","zoomX"]},myText:{className:"highcharts-label-annotation",symbol:"label.svg"}}}}};window.H2buffer.chart=window.Highcharts.stockChart("container",t),window.H2buffer.chart||alert("HighChart Option error!")}function defineCrosshairX(){let e=!1;return 1===window.H2buffer.CrossHair||3===window.H2buffer.CrossHair?e={width:1,snap:!0}:4===window.H2buffer.CrossHair||6===window.H2buffer.CrossHair?e={width:1,snap:!1}:7===window.H2buffer.CrossHair||9===window.H2buffer.CrossHair?e={width:3,snap:!0}:10!==window.H2buffer.CrossHair&&12!==window.H2buffer.CrossHair||(e={width:3,snap:!1}),e}function defineCrosshairY(){let e=!1;return 2===window.H2buffer.CrossHair||3===window.H2buffer.CrossHair?e={width:1,snap:!0}:5===window.H2buffer.CrossHair||6===window.H2buffer.CrossHair?e={width:1,snap:!1}:8===window.H2buffer.CrossHair||9===window.H2buffer.CrossHair?e={width:3,snap:!0}:11!==window.H2buffer.CrossHair&&12!==window.H2buffer.CrossHair||(e={width:3,snap:!1}),e}function defineHighLight(){let e={hover:{enabled:!0,lineWidthPlus:0},inactive:{enabled:!1,opacity:1}};return 1===window.H2buffer.HighLight?e={hover:{enabled:!0,lineWidthPlus:1},inactive:{enabled:!0,opacity:.2}}:2===window.H2buffer.HighLight?e={hover:{enabled:!0,lineWidthPlus:1},inactive:{enabled:!0,opacity:.5}}:3===window.H2buffer.HighLight?e={hover:{enabled:!0,lineWidthPlus:1},inactive:{enabled:!1,opacity:1}}:4===window.H2buffer.HighLight?e={hover:{enabled:!0,lineWidthPlus:3},inactive:{enabled:!0,opacity:.2}}:5===window.H2buffer.HighLight?e={hover:{enabled:!0,lineWidthPlus:3},inactive:{enabled:!0,opacity:.5}}:6===window.H2buffer.HighLight&&(e={hover:{enabled:!0,lineWidthPlus:3},inactive:{enabled:!1,opacity:1}}),e}function defineToolTip(){let e={enabled:!1};return 1===window.H2buffer.ToolTip?e={enabled:!0,formatter:null,shared:!1,split:!0,valueDecimals:2}:2===window.H2buffer.ToolTip?e={enabled:!0,formatter:null,shared:!1,split:!1,valueDecimals:2}:3===window.H2buffer.ToolTip?e={enabled:!0,formatter:function(){return[""].concat(this.points?this.points.map(function(e){return"MinMax"===e.series.name?e.series.name+": <b>"+window.Highcharts.numberFormat(e.point.low,2,",",".")+" - "+window.Highcharts.numberFormat(e.point.high,2,",",".")+" "+e.series.tooltipOptions.valueSuffix+"</b>":e.series.name+": <b>"+window.Highcharts.numberFormat(e.y,2,",",".")+" "+e.series.tooltipOptions.valueSuffix+"</b>"}):[])},shared:!1,split:!0,valueDecimals:2}:4===window.H2buffer.ToolTip?e={enabled:!0,formatter:function(){return"MinMax"===this.series.name?this.point.series.name+": <b>"+window.Highcharts.numberFormat(this.point.low,2,",",".")+" - "+window.Highcharts.numberFormat(this.point.high,2,",",".")+" "+this.point.series.tooltipOptions.valueSuffix+"</b>":this.point.series.name+": <b>"+window.Highcharts.numberFormat(this.point.y,2,",",".")+" "+this.point.series.tooltipOptions.valueSuffix+"</b>"},shared:!1,split:!1,valueDecimals:2}:5===window.H2buffer.ToolTip&&(e={enabled:!0,formatter:function(){var e=new Date(this.x);return this.points.reduce(function(e,t){return"MinMax"===t.series.name?e+"<br/>"+t.series.name+": "+window.Highcharts.numberFormat(t.point.low,2,",",".")+" - "+window.Highcharts.numberFormat(t.point.high,2,",",".")+" "+t.series.tooltipOptions.valueSuffix:e+"<br/>"+t.series.name+": "+window.Highcharts.numberFormat(t.y,2,",",".")+" "+t.series.tooltipOptions.valueSuffix},"<b>"+window.Highcharts.dateFormat("%A, %e. %b %Y, %H:%M",e)+"</b>")},shared:!0,split:!1,valueDecimals:2}),e}function showAggrText(){var i;let n;if(window.H2buffer.Navigator<3){for(let t of window.H2buffer.chart.series)if(t.visible&&"nav"!==t.options.group){var o=t.currentDataGrouping;if(o){let e=o.unitName+(1<o.count?"2":"").toString();window.ChhLanguage.default.historian["aggr"+e]&&(e=window.ChhLanguage.default.historian["aggr"+e]),t.options.id&&(i=window.H2buffer.DataAttr.findIndex(e=>e.id===t.options.id.toString()),n=0,-1!==i&&(n=parseInt(window.H2buffer.DataAttr[i].aggr.substr(1,2)))),1===n?document.getElementById("aggr_text").innerHTML=" - "+window.ChhLanguage.default.historian.aggrtxt1+": "+o.count+"/"+e:2===n?document.getElementById("aggr_text").innerHTML=" - "+window.ChhLanguage.default.historian.aggrtxt2+": "+o.count+"/"+e:3===n?document.getElementById("aggr_text").innerHTML=" - "+window.ChhLanguage.default.historian.aggrtxt3+": "+o.count+"/"+e:4===n?document.getElementById("aggr_text").innerHTML=" - "+window.ChhLanguage.default.historian.aggrtxt4+": "+o.count+"/"+e:5===n?document.getElementById("aggr_text").innerHTML=" - "+window.ChhLanguage.default.historian.aggrtxt5+": "+o.count+"/"+e:6===n?document.getElementById("aggr_text").innerHTML=" - "+window.ChhLanguage.default.historian.aggrtxt6:7===n?document.getElementById("aggr_text").innerHTML=" - "+window.ChhLanguage.default.historian.aggrtxt7+": "+o.count+"/"+e:document.getElementById("aggr_text").innerHTML=" - "+window.ChhLanguage.default.historian.aggrtxt1+": "+o.count+"/"+e}else document.getElementById("aggr_text").innerHTML=" -  "+window.ChhLanguage.default.historian.aggrtxt0;break}}else document.getElementById("aggr_text").innerHTML=""}function chartSetElements(){"string"==typeof window.H2buffer.chart.options.chart.backgroundColor?$("body").css("background-color",window.H2buffer.chart.options.chart.backgroundColor):"string"==typeof window.H2buffer.chart.options.background2?$("body").css("background-color",window.H2buffer.chart.options.background2):"string"==typeof window.H2buffer.chart.options.chart.borderColor&&$("body").css("background-color",window.H2buffer.chart.options.chart.borderColor),$("#message").css("color",window.H2buffer.chart.options.labels.style.color),"string"==typeof window.H2buffer.Theme_Setting.background2&&($(".navbar-default").css("background-color",window.H2buffer.Theme_Setting.background2),$(".btn-default").css("background-color",window.H2buffer.Theme_Setting.background2),$(".form-select-h2").css("background-color",window.H2buffer.Theme_Setting.background2),$(".form-input-h2").css("background-color",window.H2buffer.Theme_Setting.background2),$("div.modal-content").css("background-color",window.H2buffer.Theme_Setting.background2)),"string"==typeof window.H2buffer.Theme_Setting.textColor&&($(".navbar-default").css("color",window.H2buffer.Theme_Setting.textColor),$(".btn-default").css("color",window.H2buffer.Theme_Setting.textColor),$(".btn-default").css("border-color",window.H2buffer.Theme_Setting.textColor),$(".form-select-h2").css("color",window.H2buffer.Theme_Setting.textColor),$(".form-select-h2").css("border-color",window.H2buffer.Theme_Setting.textColor),$(".form-input-h2").css("color",window.H2buffer.Theme_Setting.textColor),$(".form-input-h2").css("border-color",window.H2buffer.Theme_Setting.textColor),$("div.modal-content").css("color",window.H2buffer.Theme_Setting.textColor),$("div.modal-content").css("border-color",window.H2buffer.Theme_Setting.textColor));let e,t,i;for($("#Select-Color").empty(),e=document.getElementById("Select-Color"),i=0;i<window.H2buffer.chart.options.colors.length;i++)t=document.createElement("option"),t.text="Color "+i,t.value="F"+i,t.style.backgroundColor=window.H2buffer.chart.options.colors[i],e.add(t);for($("#Select-Marker").empty(),e=document.getElementById("Select-Marker"),t=document.createElement("option"),t.text="none",t.value="M0",e.add(t),i=0;i<window.H2buffer.chart.options.symbols.length;i++)t=document.createElement("option"),t.text=window.H2buffer.chart.options.symbols[i],t.value="M"+(i+1),e.add(t);for(i=0;i<window.H2buffer.chart.options.symbols.length;i++)t=document.createElement("option"),t.text=window.H2buffer.chart.options.symbols[i]+"-RS",t.value="M"+(i+1+window.H2buffer.chart.options.symbols.length),e.add(t);for(i=0;i<window.H2buffer.chart.options.symbols.length;i++)t=document.createElement("option"),t.text=window.H2buffer.chart.options.symbols[i]+"-RW",t.value="M"+(i+1+2*window.H2buffer.chart.options.symbols.length),e.add(t);for(i=0;i<window.H2buffer.chart.options.symbols.length;i++)t=document.createElement("option"),t.text=window.H2buffer.chart.options.symbols[i]+"-FS",t.value="M"+(i+1+3*window.H2buffer.chart.options.symbols.length),e.add(t);for(i=0;i<window.H2buffer.chart.options.symbols.length;i++)t=document.createElement("option"),t.text=window.H2buffer.chart.options.symbols[i]+"-FW",t.value="M"+(i+1+4*window.H2buffer.chart.options.symbols.length),e.add(t);for($("#Select-AxisColor").empty(),e=document.getElementById("Select-AxisColor"),t=document.createElement("option"),t.text="Theme",t.value="0",t.style.backgroundColor=window.Highcharts.defaultOptions.yAxis.lineColor,e.add(t),t=document.createElement("option"),t.text="1.Serie",t.value="1",t.style.backgroundColor=window.Highcharts.defaultOptions.yAxis.lineColor,e.add(t),i=0;i<window.H2buffer.chart.options.colors.length;i++)t=document.createElement("option"),t.text="Color "+i,t.value=(i+2).toString(),t.style.backgroundColor=window.H2buffer.chart.options.colors[i],e.add(t);window.H2buffer.Navigator<4?$(".highcharts-stocktools-wrapper").css("display","block"):$(".highcharts-stocktools-wrapper").css("display","none"),$(window).resize(function(){document.getElementById("container").setAttribute("style","height:"+calcContSize().toString()+"px"),window.H2buffer.chart.legend.update(defineLegend()),window.H2buffer.chart.reflow()})}function eventSingleRegister(e,t,i){return(void 0===jQuery._data($(e)[0],"events")||void 0===jQuery._data($(e)[0],"events")[t])&&($(e).on(t,i),!0)}function refreshClick(){window.H2buffer.ZR_Ende=new Date(Date.now());var e=window.H2buffer.chart.xAxis[0].getExtremes();return(e.max<e.dataMax||e.min>e.dataMin)&&(window.H2buffer.Zoom=Math.round((e.max-e.min)/36e5*100)/100),loadNewSerienData(),!0}function setLocalData(e,t){try{var i=window.H2buffer.server+"_"+window.H2buffer.port+"_"+window.H2buffer.version+"_"+e;localStorage.setItem(i,t)}catch{}}function getLocalData(e){try{var t=window.H2buffer.server+"_"+window.H2buffer.port+"_"+window.H2buffer.version+"_"+e;return localStorage.getItem(t)}catch{return""}}function checkZeitraum(e){let t=e._range;isNaN(t)&&(t=307584e6);e=new Date(window.H2buffer.ZR_Ende-new Date(t));return window.H2buffer.ZR_Start=e,loadNewSerienData(),!(window.H2buffer.Button_Jump=!0)}function calcContSize(){let e,t;var i=window.H2buffer.FontSize/14;return e=4===window.H2buffer.Navigator||3===window.H2buffer.Navigator?10:55,e=Math.round(e*i),0===window.H2buffer.ShowFilter?t=0:1===window.H2buffer.ShowFilter?t=105:2===window.H2buffer.ShowFilter?t=35:3===window.H2buffer.ShowFilter&&(t=70),t=Math.round(t*i),$(window).height()-e-t}function ajaxErrorOutput(e,t,i){console.log("AXAJ-error:"),console.log(e),console.log(t),console.log(i)}function sortLowercase(e,t){e=e.toLowerCase(),t=t.toLowerCase();return e<t?-1:t<e?1:0}function clickShowDialogYAxis(e){if(e.classList)for(var t of e.classList)if("axisy"===t.substr(0,5)){showDialogYAxis(t);break}return!0}function toolTipInfo(n){let o=new Date(n.x+getComparisionBackDay(n.series.options.id.split("_")[0])),r="<span style='fill:"+n.color+"'>● </span>"+n.series.name+": <b>"+window.Highcharts.numberFormat(n.y,2,",",".")+" "+n.series.tooltipOptions.valueSuffix+"</b><br/>";if(n.series.hasGroupedData){let e="";var a;n.series.options.id&&(a=window.H2buffer.DataAttr.findIndex(e=>e.id===n.series.options.id.toString()),e=0,-1!==a&&(e=parseInt(window.H2buffer.DataAttr[a].aggr.substr(1,2))));let t;n.series.currentDataGrouping.totalRange&&(t=n.series.currentDataGrouping.totalRange);let i=window.Highcharts.dateFormat("%H:%M",o.getTime()+t);if("00:00"===i&&(i="24:00"),t<36e5||t<864e5?r+="<b>"+window.Highcharts.dateFormat("%A, %e. %b %Y, %H:%M",o)+"-"+i+"</b>":t<1728e6?r+="<b>"+window.Highcharts.dateFormat("%e. %b",o)+"-"+window.Highcharts.dateFormat("%e. %b %Y",o.getTime()+t-864e5)+"</b>":r+="<b>"+window.Highcharts.dateFormat("%b %Y",o)+"</b>",r+="<i> (<b>",1===e&&(r+=jQuery("<div/>").html("&#x00d8; ").text()),2===e&&(r+=jQuery("<div/>").html("&#x0394; ").text()),3===e&&(r+=jQuery("<div/>").html("&#x03a8; ").text()),4===e&&(r+=jQuery("<div/>").html("&#x01a9; ").text()),5===e&&(r+=jQuery("<div/>").html("&#x01ac; ").text()),6===e&&(r+=jQuery("<div/>").html("&#x2248; ").text()),7===e&&(r+=jQuery("<div/>").html("&#x2359; ").text()),n.series.currentDataGrouping){let e=n.series.currentDataGrouping.unitName+(1<n.series.currentDataGrouping.count?"2":"").toString();window.ChhLanguage.default.historian["aggr"+e]&&(e=window.ChhLanguage.default.historian["aggr"+e]),r+="</b> "+n.series.currentDataGrouping.count+" "+e}r+=")</i><br/>"}else r+="<b>"+window.Highcharts.dateFormat("%A, %b %e, %H:%M:%S",o)+"</b>";return r}function chartSetFontSize(){var e=window.H2buffer.FontSize.toString()+"px",t=Math.round(window.H2buffer.FontSize/6*5).toString()+"px",i=Math.round(window.H2buffer.FontSize/2).toString()+"px",t={title:{style:{fontSize:e}},subtitle:{style:{fontSize:t}},xAxis:{labels:{style:{fontSize:e}},title:{style:{fontSize:e}}},yAxis:{labels:{style:{fontSize:e}},title:{style:{fontSize:e}}},tooltip:{headerFormat:1===window.H2buffer.ToolTip?'<span style="font-size: '+e+'">{point.key}</span><br/>':"",style:{fontSize:t}},legend:{itemStyle:{fontSize:t},navigation:{arrowSize:Math.round(window.H2buffer.FontSize/6*5),style:{fontSize:t}},title:{style:{fontSize:e}}},credits:{style:{fontSize:i}},labels:{style:{fontSize:t}},rangeSelector:{buttonTheme:{style:{fontSize:t}},buttonSpacing:Math.round(window.H2buffer.FontSize-7)},navigator:{height:3*window.H2buffer.FontSize},scrollbar:{height:window.H2buffer.FontSize},navigation:{buttonOptions:{symbolSize:window.H2buffer.FontSize,height:window.H2buffer.FontSize+8,width:window.H2buffer.FontSize+10},menuItemStyle:{"font-size":t}}};if(window.H2buffer.Theme_Setting=window.Highcharts.merge(window.H2buffer.Theme_Setting,t),window.H2buffer.FontSize){$("body").css("font-size",window.H2buffer.FontSize.toString()+"px"),$(".form-select-h2").css("font-size",window.H2buffer.FontSize.toString()+"px"),$(".form-input-h2").css("font-size",window.H2buffer.FontSize.toString()+"px"),$(".modal-title").css("font-size",window.H2buffer.FontSize.toString()+"px"),$(".modal-title2").css("font-size",window.H2buffer.FontSize.toString()+"px"),$(".modal-title3").css("font-size",window.H2buffer.FontSize.toString()+"px"),$(".btn-default").css("font-size",window.H2buffer.FontSize.toString()+"px"),$(".LinePopup-text").css("width",140+6*window.H2buffer.FontSize+"px"),$(".modal-dialog").css("width",400+17*window.H2buffer.FontSize+"px"),$(".close").css("font-size",(window.H2buffer.FontSize/2*3).toString()+"px"),$(".navbar-brand").css("font-size",(window.H2buffer.FontSize+4).toString()+"px"),$(".highcharts-button-box").css("height",(window.H2buffer.FontSize+4).toString()+"px"),$("#bntFavorit").css("width",16+6*window.H2buffer.FontSize+"px");let e=document.querySelector("style");e.innerHTML=".highcharts-toggle-toolbar.highcharts-arrow-left  { \n  width: "+(window.H2buffer.FontSize+6).toString()+"px;\n  height: "+(window.H2buffer.FontSize+6).toString()+"px;\n  background-color: "+window.H2buffer.Theme_Setting.background2+";\n}\n.highcharts-toggle-toolbar.highcharts-arrow-left.highcharts-arrow-right {\n  width: "+(window.H2buffer.FontSize+6).toString()+"px;\n  height: "+(window.H2buffer.FontSize+6).toString()+"px;\n  background-color: "+window.H2buffer.Theme_Setting.background2+";\n}\ndiv.highcharts-bindings-wrapper li > span.highcharts-menu-item-btn { \n  background-size: "+(window.H2buffer.FontSize+20).toString()+"px 100%;\n}\n",e.innerHTML+="div.highcharts-menu-wrapper, div.highcharts-bindings-wrapper ul { \n  width: "+(window.H2buffer.FontSize+20).toString()+"px;\n}\nli.highcharts-segment > ul.highcharts-submenu-wrapper { \n  width: "+(window.H2buffer.FontSize+20).toString()+"px;\n  background: "+window.H2buffer.Theme_Setting.background2+";\n}\ndiv.highcharts-bindings-wrapper .highcharts-stocktools-toolbar li { \n  height: "+(window.H2buffer.FontSize+20).toString()+"px;\n  background-color: "+window.H2buffer.Theme_Setting.background2+";\n}\n",e.innerHTML+="div.highcharts-bindings-wrapper .highcharts-stocktools-toolbar li.highcharts-separator {\n  height: "+window.H2buffer.FontSize.toString()+"px;\n}\n",e.innerHTML+="div#filter select, div#filter input, div#filter button { \n  height: "+(34/14*window.H2buffer.FontSize).toString()+"px;\n}\n",e.innerHTML+=".highcharts-indicator-list {\n  background: "+window.H2buffer.Theme_Setting.background2+";\n  color: "+window.H2buffer.Theme_Setting.textColor+";\n}\n",e.innerHTML+=".highcharts-input-search-indicators-label {\n  color: "+window.H2buffer.Theme_Setting.textColor+";\n  background: "+window.H2buffer.Theme_Setting.background2+";\n}\n",e.innerHTML+=".highcharts-popup {\n  background-color: "+window.H2buffer.Theme_Setting.background2+";\n  color: "+window.H2buffer.Theme_Setting.textColor+";\n  border: 1px solid "+window.H2buffer.Theme_Setting.chart.borderColor+";\n}\n",e.innerHTML+="rect.highcharts-button-box {\n  width: "+(window.H2buffer.FontSize+20).toString()+"px;\n  height: "+(window.H2buffer.FontSize+10).toString()+"px;\n  x: "+Math.round((window.H2buffer.FontSize-14)/2*-1).toString()+"px;\n  y: "+Math.round((window.H2buffer.FontSize-14)/2*-1).toString()+"px;\n}\n",e.innerHTML+=".highcharts-reset-zoom rect.highcharts-button-box {\n  width: "+(window.H2buffer.FontSize+135).toString()+"px;\n  height: "+(window.H2buffer.FontSize+20).toString()+"px;\n}\n",e.innerHTML+="div#container{\n  z-index: auto !important;\n  overflow: visible!important;\n}\n"}}window.H2buffer={version:"v6.7",server:location.hostname,port:""===location.port?"80":location.port,ApiKey:"",refreshSec:60,AutoRefresh:0,AutoRefreshCount:0,chart:void 0,FontSizes:[8,10,12,14,16,18,20,24,30,40,50,60,70,80,100],DashType:["Solid","Dash","DashDot","Dot","LongDash","LongDashDot","LongDashDotDot","ShortDash","ShortDashDot","ShortDashDotDot","ShortDot"],CrossHair:1,Legend:1,ToolTip:1,HighLight:1,Navigator:0,Labels:0,Grid:2,DayLight:1,filter_feld:"",Scroll_Legend:!0,ShowFilter:1,Limit:!1,Theme:"standard",Theme_Setting:void 0,FontSize:14,Title:"",Subtitle:"",Loading:0,Button_Jump:!1,PopupID:void 0,PopupAxisPos:void 0,Queue:[],ColorNext:0,Drag_Pos:0,Zoom:-1,Settings_old:{},Settings:{},DataPointFilter:0,ZR_Ende:new Date(Date.now()),ZR_Start:new Date(Date.now()-new Date(864e5)),DataPoints:[],DataAttr:[]},window.H2buffer.yAxis=[{position:!1,limit:0,min:0,max:0,tick:11,text:window.ChhLanguage.default.historian.yaxisText0,color:1,type:0},{position:!1,limit:1,min:10,max:30,tick:11,text:window.ChhLanguage.default.historian.yaxisText1,color:1,type:0},{position:!0,limit:1,min:-20,max:50,tick:11,text:window.ChhLanguage.default.historian.yaxisText2,color:1,type:0},{position:!1,limit:1,min:20,max:90,tick:11,text:window.ChhLanguage.default.historian.yaxisText3,color:1,type:0},{position:!0,limit:1,min:0,max:100,tick:11,text:window.ChhLanguage.default.historian.yaxisText4,color:1,type:0},{position:!0,limit:1,min:0,max:2,tick:11,text:window.ChhLanguage.default.historian.yaxisText5,color:1,type:0},{position:!0,limit:1,min:20,max:100,tick:11,text:window.ChhLanguage.default.historian.yaxisText6,color:1,type:0},{position:!1,limit:1,min:900,max:1e3,tick:11,text:window.ChhLanguage.default.historian.yaxisText7,color:1,type:0},{position:!1,limit:1,min:0,max:5e3,tick:11,text:window.ChhLanguage.default.historian.yaxisText8,color:1,type:0},{position:!0,limit:1,min:300,max:3e3,tick:11,text:window.ChhLanguage.default.historian.yaxisText9,color:1,type:0},{position:!0,limit:1,min:3,max:15,tick:11,text:window.ChhLanguage.default.historian.yaxisText10,color:1,type:0},{position:!0,limit:0,min:0,max:0,tick:11,text:window.ChhLanguage.default.historian.yaxisText11,color:1,type:0},{position:!1,limit:0,min:0,max:0,tick:11,text:window.ChhLanguage.default.historian.yaxisText12,color:1,type:1},{position:!1,limit:0,min:0,max:0,tick:11,text:window.ChhLanguage.default.historian.yaxisText13,color:1,type:0},{position:!1,limit:0,min:0,max:0,tick:11,text:window.ChhLanguage.default.historian.yaxisText14,color:1,type:0},{position:!1,limit:0,min:0,max:0,tick:11,text:window.ChhLanguage.default.historian.yaxisText15,color:1,type:0},{position:!1,limit:0,min:0,max:0,tick:11,text:window.ChhLanguage.default.historian.yaxisText16,color:1,type:0},{position:!1,limit:0,min:0,max:0,tick:11,text:window.ChhLanguage.default.historian.yaxisText17,color:1,type:0},{position:!1,limit:0,min:0,max:0,tick:11,text:window.ChhLanguage.default.historian.yaxisText18,color:1,type:0},{position:!1,limit:0,min:0,max:0,tick:11,text:window.ChhLanguage.default.historian.yaxisText19,color:1,type:0}],$(document).ready(function(){window.Highcharts.setOptions({global:{useUTC:!1},lang:window.ChhLanguage.default.highcharts}),window.H2buffer.ApiKey="","string"==typeof apiKey&&""!==apiKey&&(window.H2buffer.ApiKey=apiKey.substring(1,apiKey.length));let e=getLocalData("setting");if(e&&'{"'===e.substring(0,2))try{window.H2buffer.Settings=JSON.parse(e),parseSetting(),readLinkData();var t=getLocalData("settingTime");(null===t||parseInt(t)+36e5<=Date.now())&&setTimeout(requestSettings,1e3)}catch{requestSettings()}else requestSettings();document.getElementById("container").setAttribute("style","height:"+($(document).height()-160)+"px"),document.getElementById("refresh").innerHTML=window.ChhLanguage.default.historian.buttonRefresh,document.getElementById("createLink").innerHTML=window.ChhLanguage.default.historian.buttonLink,document.getElementById("bntFavorit").innerHTML=window.ChhLanguage.default.historian.favoritTxt,document.getElementById("filterFeld").placeholder=window.ChhLanguage.default.historian.filterPlaceHolder,document.title=window.ChhLanguage.default.interface.pageTitle,window.Highcharts.SVGRenderer.prototype.symbols.plus=function(e,t,i,n){return["M",e+.3*i,t,"L",e+.7*i,t,"L",e+.7*i,t+.3*n,"L",e+i,t+.3*n,"L",e+i,t+.7*n,"L",e+.7*i,t+.7*n,"L",e+.7*i,t+n,"L",e+.3*i,t+n,"L",e+.3*i,t+.7*n,"L",e,t+.7*n,"L",e,t+.3*n,"L",e+.3*i,t+.3*n,"L",e+.3*i,t,"Z"]},window.Highcharts.VMLRenderer&&(window.Highcharts.VMLRenderer.prototype.symbols.plus=window.Highcharts.SVGRenderer.prototype.symbols.plus),window.Highcharts.defaultOptions.symbols.push("plus"),window.Highcharts.SVGRenderer.prototype.symbols.cross=function(e,t,i,n){return["M",e,t+.2*n,"L",e+.3*i,t+.5*n,"L",e,t+.8*n,"L",e+.2*i,t+n,"L",e+.5*i,t+.7*n,"L",e+.8*i,t+n,"L",e+i,t+.8*n,"L",e+.7*i,t+.5*n,"L",e+i,t+.2*n,"L",e+.8*i,t,"L",e+.5*i,t+.3*n,"L",e+.2*i,t,"L",e,t+.2*n,"Z"]},window.Highcharts.VMLRenderer&&(window.Highcharts.VMLRenderer.prototype.symbols.cross=window.Highcharts.SVGRenderer.prototype.symbols.cross),window.Highcharts.defaultOptions.symbols.push("cross"),window.Highcharts.SVGRenderer.prototype.symbols.star=function(e,t,i,n){return["M",e,t+.4*n,"L",e+.35*i,t+.35*n,"L",e+.5*i,t,"L",e+.65*i,t+.35*n,"L",e+i,t+.4*n,"L",e+.75*i,t+.65*n,"L",e+.85*i,t+n,"L",e+.5*i,t+.8*n,"L",e+.15*i,t+n,"L",e+.25*i,t+.65*n,"Z"]},window.Highcharts.VMLRenderer&&(window.Highcharts.VMLRenderer.prototype.symbols.star=window.Highcharts.SVGRenderer.prototype.symbols.star),window.Highcharts.defaultOptions.symbols.push("star");let i,n,o,r;for(i=document.getElementById("Select-Aggregation"),o=0;o<8;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["aggrtxt"+o],n.value="A"+o,i.add(n);for(i=document.getElementById("Select-AggrTime"),o=0;o<13;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["atimetxt"+o],n.value="T"+o,i.add(n);for(i=document.getElementById("Select-Compare"),o=0;o<14;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["comptype"+o],n.value="C"+o,i.add(n);for(i=document.getElementById("Select-Line"),o=0;o<12;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["linetype"+o],n.value="L"+o,i.add(n);for(i=document.getElementById("Select-DashType"),o=0;o<window.H2buffer.DashType.length;o++)n=document.createElement("option"),window.ChhLanguage.default.historian["dashtype"+o]?n.text=window.ChhLanguage.default.historian["dashtype"+o]:n.text=window.H2buffer.DashType[o],n.value="D"+o,i.add(n);for(i=document.getElementById("Select-LineWidth"),o=0;o<11;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["linewidth"+o],n.value="W"+o,i.add(n);for(i=document.getElementById("Select-Legend"),o=0;o<7;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["legendtxt"+o],n.value=o,i.add(n);for(i=document.getElementById("Select-Navigator"),o=0;o<5;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["navitxt"+o],n.value=o,i.add(n);for(i=document.getElementById("Select-Label"),o=0;o<3;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["labeltxt"+o],n.value=o,i.add(n);for(i=document.getElementById("Select-Layout"),o=0;o<4;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["layouttxt"+o],n.value=o,i.add(n);for(i=document.getElementById("Select-Grid"),o=0;o<7;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["gridtxt"+o],n.value=o,i.add(n);for(i=document.getElementById("Select-Content"),o=0;o<4;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["contenttxt"+o],n.value=o,i.add(n);for(i=document.getElementById("Select-DataPoint"),o=0;o<4;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["datapoint"+o],n.value=o,i.add(n);for(r in i=document.getElementById("Select-Theme"),n=document.createElement("option"),n.text="Standard hell/dunkel",n.value="standard",i.add(n),window.DP_Themes)n=document.createElement("option"),n.text=r,n.value=r,i.add(n);for(r in i=document.getElementById("Select-FontSize"),window.window.H2buffer.FontSizes)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian.fontsize+"-"+window.H2buffer.FontSizes[r].toString(),n.value=window.H2buffer.FontSizes[r],i.add(n);for(i=document.getElementById("Select-CrossHair"),o=0;o<13;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["crosshairtxt"+o],n.value=o,i.add(n);for(i=document.getElementById("Select-ToolTip"),o=0;o<6;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["tooltiptxt"+o],n.value=o,i.add(n);for(i=document.getElementById("Select-HighLight"),o=0;o<7;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["highlighttxt"+o],n.value=o,i.add(n);for(i=document.getElementById("Select-AxisType"),n=document.createElement("option"),n.text=window.ChhLanguage.default.historian.yaxistype0,n.value="0",i.add(n),n=document.createElement("option"),n.text=window.ChhLanguage.default.historian.yaxistype1,n.value="1",i.add(n),i=document.getElementById("Select-Position"),n=document.createElement("option"),n.text=window.ChhLanguage.default.historian.yaxispos0,n.value="0",i.add(n),n=document.createElement("option"),n.text=window.ChhLanguage.default.historian.yaxispos1,n.value="1",i.add(n),i=document.getElementById("Select-Limit"),n=document.createElement("option"),n.text=window.ChhLanguage.default.historian.yaxislimit0,n.value="0",i.add(n),n=document.createElement("option"),n.text=window.ChhLanguage.default.historian.yaxislimit1,n.value="1",i.add(n),n=document.createElement("option"),n.text=window.ChhLanguage.default.historian.yaxislimit2,n.value="2",i.add(n),i=document.getElementById("Select-Stacking"),o=0;o<6;o++)n=document.createElement("option"),n.text=window.ChhLanguage.default.historian["Stacking"+o],n.value=o,i.add(n);var a;(a=window.Highcharts).wrap(a.Legend.prototype,"render",function(e){let t=this,i=a.pick(t.options.navigation.animation,!0);e.apply(this,Array.prototype.slice.call(arguments,1)),$(t.group.element).on("wheel",function(e){window.H2buffer.Scroll_Legend&&(t.chart.pointer.normalize(e).originalEvent.deltaY<0?t.scroll(-1,i):t.scroll(1,i)),window.H2buffer.Scroll_Legend=!window.H2buffer.Scroll_Legend})}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{"standard"===window.H2buffer.Theme&&createChart()}),setStockToolLang()}),$("#DialogBtnOK").click(function(){return getDialogLine(),!0}),$("#LineDefault").click(function(){return saveLine(),!0}),$("#DialogBtnClose").click(function(){return $("#LinePopup").modal("hide"),!0}),$("#Dialog2BtnOK").click(function(){return getDialogSetting(),!0}),$("#SettingDefault").click(function(){return saveSetting(),!0}),$("#Dialog4BtnOK").click(function(){return $("#FavPopup").modal("hide"),!(document.getElementById("Line-Title4").value="")}),$("#favAdd").click(function(){return getDialogFav(),!(document.getElementById("Line-Title4").value="")}),$("#Dialog4BtnClose").click(function(){return document.getElementById("Line-Title4").value="",$("#FavPopup").modal("hide"),!0}),$("#Dialog2BtnClose").click(function(){$("#SettingPopup").modal("hide")}),$("#Dialog3BtnOK").click(function(){return getDialogAxis(),!0}),$("#AxisDefault").click(function(){getDialogAxis();var e="";return e+="P"+(window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].position?"1":"0"),e+="|C"+window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].type,e+="|A"+window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].limit,e+="|L"+window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].min,e+="|H"+window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].max,e+="|G"+window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].tick,e+="|F"+window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].color,e+="|T"+encodeURIComponent(window.H2buffer.yAxis[window.H2buffer.PopupAxisPos].text).replace(/'/g,"%27"),window.H2buffer.Settings["YAXIS"+window.H2buffer.PopupAxisPos]=e,saveSettingsH2(),!0}),$("#Dialog3BtnClose").click(function(){return $("#AxisPopup").modal("hide"),!0}),eventSingleRegister("#filterFeld","keyup",function(){window.H2buffer.filter_feld=$(this).val().toLowerCase(),changeEventRaumFilter()}),eventSingleRegister("#Select-Raum","change",function(){changeEventRaumFilter()}),eventSingleRegister("#Select-Gewerk","change",function(){changeEventRaumFilter()}),eventSingleRegister("#refresh","click",function(){return refreshClick(),!0}),eventSingleRegister("#createLink","click",function(){return createUrl(),!0}),eventSingleRegister("#bntFavorit","click",function(){return showDialogFav(),!0}),eventSingleRegister("#Select-Color","change",function(){document.getElementById("Select-Color").style.backgroundColor=window.H2buffer.chart.options.colors[parseInt(document.getElementById("Select-Color").value.substr(1,2))]}),eventSingleRegister("#Select-AxisColor","change",function(){showDialogYAxisUpdatColor()});
//# sourceMappingURL=H2-HighChart.js.map